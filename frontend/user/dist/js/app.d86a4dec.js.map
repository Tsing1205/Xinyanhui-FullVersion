{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/ChatMessages.vue?d3ce","webpack:///./src/assets/head.jpg","webpack:///./src/components/ConsultantDetail.vue?ff08","webpack:///./src/components/Chatnormal.vue?fa2f","webpack:///./src/assets/icon.png","webpack:///./src/App.vue?dde7","webpack:///src/App.vue","webpack:///./src/App.vue?40dc","webpack:///./src/App.vue","webpack:///./src/plugins/element.js","webpack:///./src/views/Layout.vue?7a6b","webpack:///./src/components/HeaderNav.vue?02be","webpack:///src/components/HeaderNav.vue","webpack:///./src/components/HeaderNav.vue?ddcb","webpack:///./src/components/HeaderNav.vue","webpack:///src/views/Layout.vue","webpack:///./src/views/Layout.vue?405d","webpack:///./src/views/Layout.vue","webpack:///./src/components/ConsultantDetail.vue?bc7b","webpack:///src/components/ConsultantDetail.vue","webpack:///./src/components/ConsultantDetail.vue?50a9","webpack:///./src/components/ConsultantDetail.vue","webpack:///./src/components/MySchedule.vue?3393","webpack:///src/components/MySchedule.vue","webpack:///./src/components/MySchedule.vue?c63a","webpack:///./src/components/MySchedule.vue","webpack:///./src/components/Chat.vue?7376","webpack:///./src/components/ChatContainer.vue?ab56","webpack:///./src/components/MessageBubble.vue?844a","webpack:///src/components/MessageBubble.vue","webpack:///./src/components/MessageBubble.vue?ff8d","webpack:///./src/components/MessageBubble.vue","webpack:///src/components/ChatContainer.vue","webpack:///./src/components/ChatContainer.vue?efe1","webpack:///./src/components/ChatContainer.vue","webpack:///./src/components/ChatMessages.vue?8a8b","webpack:///src/components/ChatMessages.vue","webpack:///./src/components/ChatMessages.vue?647e","webpack:///./src/components/ChatMessages.vue","webpack:///./src/components/CountdownTimer.vue?5e64","webpack:///src/components/CountdownTimer.vue","webpack:///./src/components/CountdownTimer.vue?42f7","webpack:///./src/components/CountdownTimer.vue","webpack:///./src/components/HistorySidebar.vue?c05f","webpack:///src/components/HistorySidebar.vue","webpack:///./src/components/HistorySidebar.vue?286e","webpack:///./src/components/HistorySidebar.vue","webpack:///src/components/Chat.vue","webpack:///./src/components/Chat.vue?f405","webpack:///./src/components/Chat.vue","webpack:///./src/components/Chatnormal.vue?97e8","webpack:///src/components/Chatnormal.vue","webpack:///./src/components/Chatnormal.vue?f22d","webpack:///./src/components/Chatnormal.vue","webpack:///./src/components/settings.vue?4746","webpack:///src/components/settings.vue","webpack:///./src/components/settings.vue?28de","webpack:///./src/components/settings.vue","webpack:///./src/components/messages.vue?de7a","webpack:///src/components/messages.vue","webpack:///./src/components/messages.vue?f5cc","webpack:///./src/components/messages.vue","webpack:///./src/components/book.vue?57f6","webpack:///src/components/book.vue","webpack:///./src/components/book.vue?9029","webpack:///./src/components/book.vue","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/router/permession.js","webpack:///./src/main.js","webpack:///./src/components/Chat.vue?4c33","webpack:///./src/components/settings.vue?7efe","webpack:///./src/components/CountdownTimer.vue?e206","webpack:///./src/App.vue?acfa","webpack:///./src/components/messages.vue?4c67","webpack:///./src/components/MySchedule.vue?cedd","webpack:///./src/components/ChatContainer.vue?3dfb","webpack:///./src/components/book.vue?603b","webpack:///./src/components/HistorySidebar.vue?c2df","webpack:///./src/components/HeaderNav.vue?e66a","webpack:///./src/components/MessageBubble.vue?84ea"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","components","component","Vue","use","_Pagination","_Dialog","_Autocomplete","_Dropdown","_DropdownMenu","_DropdownItem","_Menu","_Submenu","_MenuItem","_MenuItemGroup","_Input","_InputNumber","_Radio","_RadioGroup","_RadioButton","_Checkbox","_CheckboxButton","_CheckboxGroup","_Switch","_Select","_Option","_OptionGroup","_Button","_ButtonGroup","_Table","_TableColumn","_DatePicker","_TimeSelect","_TimePicker","_Popover","_Tooltip","_Breadcrumb","_BreadcrumbItem","_Form","_FormItem","_Tabs","_TabPane","_Tag","_Tree","_Alert","_Slider","_Icon","_Row","_Col","_Upload","_Progress","_Spinner","_Badge","_Card","_Rate","_Steps","_Step","_Carousel","_CarouselItem","_Collapse","_CollapseItem","_Cascader","_ColorPicker","_Transfer","_Container","_Header","_Aside","_Main","_Footer","_Timeline","_TimelineItem","_Link","_Divider","_Image","_Calendar","_Backtop","_PageHeader","_CascaderPanel","_Loading","directive","$loading","service","$msgbox","_MessageBox","$alert","alert","$confirm","confirm","$prompt","prompt","$notify","_Notification","$message","_Message","staticClass","activeMenu","_v","nativeOn","$event","handleClick","slot","_s","User","unread","_e","on","personalbar","LogoutHeadle","localStorage","getItem","token","mounted","count","methods","_this","$axios","headers","params","userId","res","removeItem","$router","HeaderNav","staticStyle","consultantName","consultantInfo","_l","date","selectedDate","currentTimes","scopedSlots","_u","fn","scope","row","time","GotoChat","status","isAppointmentActive","createConsultation","showProtocolDialog","model","callback","$$v","agreeProtocol","expression","confirmGotoChat","consultantId","parseInt","$route","id","appselectedTime","dateGroups","selectedRow","computed","group","find","times","fetchConsultantDetails","consultantData","JSON","parse","sessionStorage","info","_fetchConsultantDetails","_asyncToGenerator","regeneratorRuntime","mark","_callee","response","wrap","_context","prev","next","consultantID","sent","abrupt","formatConsultants","t0","stop","arguments","groups","entries","forEach","_ref","_ref2","_slicedToArray","dateStr","split","timeStr","rawTime","values","sort","a","b","localeCompare","_this2","URLSearchParams","append","_callee2","chatUrl","_context2","post","sessionId","path","concat","query","appointmentDate","open","msg","warning","_createConsultation","_callee3","appointment","_context3","appointmentTime","success","_x","class","selectedMonth","onDateClick","toggleView","isCalendarView","day","past","isPast","showSchedule","getDayAppointments","appointmentId","filterDate","fetchSessions","session","startTime","rating","feedback","openDetailDialog","detailDialogVisible","senderType","formatTime","hoverCloseButton","username","currentMonth","Date","getMonth","currentMonthName","Intl","DateTimeFormat","month","format","weekdays","monthDays","firstDayOffset","scheduleList","showLeaveModal","leaveReason","currentAppointmentId","appointments","monthRange","sessions","sessionHistory","generateMonth","fetchAppointments","filteredSessions","_toConsumableArray","aTime","bTime","_fetchSessions","startDate","formatDate","endDate","catch","_fetchAppointments","filter","app","generateMonthData","finish","getFullYear","toString","padStart","getDate","getHours","getMinutes","_generateMonth","monn","reverse","Tohome","$nextTick","item","querySelector","scrollIntoView","formatDisplayDate","_date$split","_date$split2","Number","cancelAppointment","cancellationReason","_this3","openCancelModal","closeCancelModal","submitCancel","trim","_this4","year","daysInMonth","firstDay","getDay","Array","from","_","_date$split$map","map","_date$split$map2","fullDate","connected","isConnected","connectionStatusText","remainingTime","sessionStarted","handleTimeUp","handleTick","showConfirm","ref","messages","addMessage","chatHistory","sidebarVisible","handleShowRating","filled","setRating","directives","rawName","domProps","composing","submitRating","index","avatar","assets","head2","jpg","messageAvatar","text","props","required","MessageBubble","default","_k","keyCode","preventDefault","onEnter","inputText","send","shiftKey","pos","selectionStart","selectionEnd","$emit","shouldBlink","formattedTime","warningThreshold","initialTime","String","timer","currentEndTime","now","minutes","Math","floor","seconds","endTimeKey","watch","newVal","triggerBlink","initializeTimer","beforeDestroy","clearInterval","endTime","setItem","updateRemaining","setInterval","max","handleTimeExpired","therapist","Boolean","history","ChatContainer","ChatMessages","CountdownTimer","HistorySidebar","sessionEnded","showRatingDialog","ws","reconnectAttempts","maxReconnectAttempts","wsUrl","host","location","initializeWebSocket","scrollToBottom","created","addEventListener","handleBeforeUnload","confirmBeforeUnload","fetchHistory","cleanupWebSocket","removeEventListener","chatScroll","$refs","container","$el","scrollTop","scrollHeight","_initializeWebSocket","WebSocket","setupWebSocketHandlers","handleReconnect","onopen","onmessage","handleIncomingMessage","onclose","wasClean","returnValue","delay","min","pow","newMessage","system","dayjs","_addMessage","content","userMessage","payload","_index","readyState","OPEN","stringify","findIndex","close","_fetchHistory","remaining","confirmEndSession","rate","put","origin","cleanupSession","formattedRemainingTime","isNaN","absSeconds","abs","prefix","calculateRemainingTime","startCountdown","appointmentDateTime","add","diff","countdownInterval","_this5","field","label","user","editable","editMode","isArray","_i","$$a","$$el","$$c","checked","$$i","$set","_q","toggleEdit","password","phone","email","fields","saveField","deleteConfirmVisible","confirmDeleteRead","markAllAsRead","deleteReadMessages","notfId","handleRead","formatContent","createTime","sortedMessages","fetchMessages","readCount","readMsgs","requests","delete","finally","datetime","y","h","str","join","record","handleCancel","showCancelModal","sortedAppointments","_submitCancel","axios","appointmentStatus","bookingDate","cancellationTime","log","defaults","common","VueRouter","routes","redirect","Layout","children","MySchedule","book","settings","Chat","Chatnormal","ConsultantDetail","router","base","process","Vuex","Store","state","mutations","SET_USER_INFO","CLEAR_USER_INFO","actions","setUserInfo","userInfo","commit","clearUserInfo","beforeEach","to","meta","isLogin","store","dispatch","baseURL","withCredentials","config","productionTip","render","App","$mount"],"mappings":"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","file":"js/app.d86a4dec.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-9fb29f5a\":\"374bdb4f\",\"chunk-a893a800\":\"cdb56150\",\"chunk-fe7a90fc\":\"ed76d0d2\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-9fb29f5a\":1,\"chunk-a893a800\":1,\"chunk-fe7a90fc\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-9fb29f5a\":\"a000a6d4\",\"chunk-a893a800\":\"8d8c0c92\",\"chunk-fe7a90fc\":\"0088eff7\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/user/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessages.vue?vue&type=style&index=0&id=11c8c508&prod&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/head.a723abb7.jpg\";","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ConsultantDetail.vue?vue&type=style&index=0&id=76ac052a&prod&lang=css\"","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Chatnormal.vue?vue&type=style&index=0&id=6f3dd444&prod&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/icon.7cbcce6c.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"app\">\r\n    <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"app\",\r\n  components: {},\r\n};\r\n</script>\r\n\r\n<style>\r\nbody{\r\n  background-color:#f2f1e4;\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=e89777a0\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=e89777a0&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\nimport {\r\n  Pagination,\r\n  Dialog,\r\n  Autocomplete,\r\n  Dropdown,\r\n  DropdownMenu,\r\n  DropdownItem,\r\n  Menu,\r\n  Submenu,\r\n  MenuItem,\r\n  MenuItemGroup,\r\n  Input,\r\n  InputNumber,\r\n  Radio,\r\n  RadioGroup,\r\n  RadioButton,\r\n  Checkbox,\r\n  CheckboxButton,\r\n  CheckboxGroup,\r\n  Switch,\r\n  Select,\r\n  Option,\r\n  OptionGroup,\r\n  Button,\r\n  ButtonGroup,\r\n  Table,\r\n  TableColumn,\r\n  DatePicker,\r\n  TimeSelect,\r\n  TimePicker,\r\n  Popover,\r\n  Tooltip,\r\n  Breadcrumb,\r\n  BreadcrumbItem,\r\n  Form,\r\n  FormItem,\r\n  Tabs,\r\n  TabPane,\r\n  Tag,\r\n  Tree,\r\n  Alert,\r\n  Slider,\r\n  Icon,\r\n  Row,\r\n  Col,\r\n  Upload,\r\n  Progress,\r\n  Spinner,\r\n  Badge,\r\n  Card,\r\n  Rate,\r\n  Steps,\r\n  Step,\r\n  Carousel,\r\n  CarouselItem,\r\n  Collapse,\r\n  CollapseItem,\r\n  Cascader,\r\n  ColorPicker,\r\n  Transfer,\r\n  Container,\r\n  Header,\r\n  Aside,\r\n  Main,\r\n  Footer,\r\n  Timeline,\r\n  TimelineItem,\r\n  Link,\r\n  Divider,\r\n  Image,\r\n  Calendar,\r\n  Backtop,\r\n  PageHeader,\r\n  CascaderPanel,\r\n  Loading,\r\n  MessageBox,\r\n  Message,\r\n  Notification\r\n} from 'element-ui';\r\n\r\nVue.use(Pagination);\r\nVue.use(Dialog);\r\nVue.use(Autocomplete);\r\nVue.use(Dropdown);\r\nVue.use(DropdownMenu);\r\nVue.use(DropdownItem);\r\nVue.use(Menu);\r\nVue.use(Submenu);\r\nVue.use(MenuItem);\r\nVue.use(MenuItemGroup);\r\nVue.use(Input);\r\nVue.use(InputNumber);\r\nVue.use(Radio);\r\nVue.use(RadioGroup);\r\nVue.use(RadioButton);\r\nVue.use(Checkbox);\r\nVue.use(CheckboxButton);\r\nVue.use(CheckboxGroup);\r\nVue.use(Switch);\r\nVue.use(Select);\r\nVue.use(Option);\r\nVue.use(OptionGroup);\r\nVue.use(Button);\r\nVue.use(ButtonGroup);\r\nVue.use(Table);\r\nVue.use(TableColumn);\r\nVue.use(DatePicker);\r\nVue.use(TimeSelect);\r\nVue.use(TimePicker);\r\nVue.use(Popover);\r\nVue.use(Tooltip);\r\nVue.use(Breadcrumb);\r\nVue.use(BreadcrumbItem);\r\nVue.use(Form);\r\nVue.use(FormItem);\r\nVue.use(Tabs);\r\nVue.use(TabPane);\r\nVue.use(Tag);\r\nVue.use(Tree);\r\nVue.use(Alert);\r\nVue.use(Slider);\r\nVue.use(Icon);\r\nVue.use(Row);\r\nVue.use(Col);\r\nVue.use(Upload);\r\nVue.use(Progress);\r\nVue.use(Spinner);\r\nVue.use(Badge);\r\nVue.use(Card);\r\nVue.use(Rate);\r\nVue.use(Steps);\r\nVue.use(Step);\r\nVue.use(Carousel);\r\nVue.use(CarouselItem);\r\nVue.use(Collapse);\r\nVue.use(CollapseItem);\r\nVue.use(Cascader);\r\nVue.use(ColorPicker);\r\nVue.use(Transfer);\r\nVue.use(Container);\r\nVue.use(Header);\r\nVue.use(Aside);\r\nVue.use(Main);\r\nVue.use(Footer);\r\nVue.use(Timeline);\r\nVue.use(TimelineItem);\r\nVue.use(Link);\r\nVue.use(Divider);\r\nVue.use(Image);\r\nVue.use(Calendar);\r\nVue.use(Backtop);\r\nVue.use(PageHeader);\r\nVue.use(CascaderPanel);\r\n\r\nVue.use(Loading.directive);\r\n\r\nVue.prototype.$loading = Loading.service;\r\nVue.prototype.$msgbox = MessageBox;\r\nVue.prototype.$alert = MessageBox.alert;\r\nVue.prototype.$confirm = MessageBox.confirm;\r\nVue.prototype.$prompt = MessageBox.prompt;\r\nVue.prototype.$notify = Notification;\r\nVue.prototype.$message = Message;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('HeaderNav'),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"head\"},[_c('img',{staticClass:\"pic\",attrs:{\"src\":require(\"../assets/icon.png\"),\"alt\":\"这是一个图标\"}}),_c('el-menu',{staticClass:\"nav\",attrs:{\"default-active\":_vm.activeMenu,\"mode\":\"horizontal\",\"active-text-color\":\"#8B4513\"}},[_c('el-menu-item',{attrs:{\"index\":\"/\"}},[_vm._v(\"首页\")]),_c('el-menu-item',{attrs:{\"index\":\"/film\"},nativeOn:{\"click\":function($event){return _vm.handleClick($event)}}},[_vm._v(\"心理测试\")]),_c('el-menu-item',{attrs:{\"index\":\"/cinema\"},nativeOn:{\"click\":function($event){return _vm.handleClick($event)}}},[_vm._v(\"AI对话\")]),_c('el-menu-item',{attrs:{\"index\":\"/myfilm\"},nativeOn:{\"click\":function($event){return _vm.handleClick($event)}}},[_vm._v(\"阅读天地\")]),_c('el-submenu',{staticClass:\"user-menu\",attrs:{\"index\":\"user\"}},[_c('template',{slot:\"title\"},[_c('div',{staticClass:\"user-container\"},[_c('span',[_vm._v(_vm._s(_vm.User))]),(_vm.unread > 0)?_c('span',{staticClass:\"dot\"}):_vm._e()])]),_c('el-menu-item',{on:{\"click\":_vm.personalbar}},[_c('span',[_vm._v(\"\\n            个人主页\\n            \"),(_vm.unread > 0)?_c('span',{staticClass:\"dot-inline\"}):_vm._e()])]),_c('el-menu-item',{on:{\"click\":_vm.LogoutHeadle}},[_vm._v(\"退出\")])],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"head\">\r\n        <img src=\"../assets/icon.png\" alt=\"这是一个图标\" class=\"pic\">\r\n\r\n        <el-menu \r\n        :default-active=\"activeMenu\"  mode=\"horizontal\" \r\n        active-text-color=\"#8B4513\" class=\"nav\"\r\n        \r\n        >\r\n            <el-menu-item index=\"/\">首页</el-menu-item>\r\n            <el-menu-item index=\"/film\"  @click.native=\"handleClick\">心理测试</el-menu-item>\r\n            <el-menu-item index=\"/cinema\"  @click.native=\"handleClick\">AI对话</el-menu-item>\r\n            <el-menu-item index=\"/myfilm\"  @click.native=\"handleClick\">阅读天地</el-menu-item>\r\n            <el-submenu index=\"user\" class=\"user-menu\">\r\n            <template slot=\"title\">\r\n                <div class=\"user-container\">\r\n                <span>{{ User }}</span>\r\n                <span v-if=\"unread > 0\" class=\"dot\"></span> <!-- 用户名上的红点 -->\r\n                </div>\r\n            </template>\r\n            <el-menu-item @click=\"personalbar\">\r\n                <span>\r\n                个人主页\r\n                <span v-if=\"unread > 0\" class=\"dot-inline\"></span> <!-- 菜单项里的红点 -->\r\n                </span>\r\n            </el-menu-item>\r\n            <el-menu-item @click=\"LogoutHeadle\">退出</el-menu-item>\r\n            </el-submenu>\r\n        </el-menu>\r\n    </div>\r\n</template>\r\n\r\n<style scoped lang=\"less\">\r\n.user-container {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n\r\n.dot {\r\n  position: absolute;\r\n  top: 0px;\r\n  right: -10px;\r\n  height: 8px;\r\n  width: 8px;\r\n  background-color: red;\r\n  border-radius: 50%;\r\n}\r\n\r\n.dot-inline {\r\n  display: inline-block;\r\n  margin-left: 4px;\r\n  height: 8px;\r\n  width: 8px;\r\n  background-color: red;\r\n  border-radius: 50%;\r\n}\r\n\r\n.pic {\r\n    margin-left: 200px;\r\n    height:60px;\r\n}\r\n\r\n.head {\r\n    display: flex;\r\n    width: 100%;\r\n    height:10%;\r\n    background-color: #fff;\r\n}\r\n\r\n.head > .nav {\r\n    margin-top: 0px;\r\n    margin-left: 50px;\r\n    height: 60px;\r\n    font-size: 70px;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.el-menu-item {\r\n    color: black;\r\n    margin-right: 0px;\r\n    height: 60px;\r\n    line-height: 60px;\r\n}\r\n\r\n.el-menu-item.is-active {\r\n    color: #8B4513;\r\n}\r\n\r\n.user-menu {\r\n    margin-left: 400px;\r\n    \r\n    /deep/ .el-submenu__title {\r\n        height: 60px;\r\n        line-height: 60px;\r\n    }\r\n}\r\n</style>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    data(){\r\n        return{\r\n            activeMenu: \"/\",\r\n            User:localStorage.getItem('username'),\r\n            unread: 0,\r\n            token:localStorage.getItem('token'),\r\n        }\r\n    },\r\n    mounted(){\r\n        this.count();\r\n    },\r\n    methods: {\r\n        count() {\r\n            this.$axios\r\n            .get(\"/user/notification/newnum\", {\r\n                headers: { token: this.token },\r\n                params: { userId: localStorage.getItem('userId') },\r\n            })\r\n            .then((res) => {\r\n                if (res.data.code === \"1\") {\r\n                this.unread = res.data.data;\r\n                }\r\n            });\r\n        },\r\n        handleClick() {\r\n            // 提示信息\r\n            this.$message({\r\n                message: \"正在开发，敬请期待！\",\r\n                type: \"warning\",\r\n            });\r\n        },\r\n        LogoutHeadle(){\r\n            localStorage.removeItem('LoginState');\r\n            localStorage.removeItem('username');\r\n            localStorage.removeItem('userId');\r\n            this.$router.push({ name: 'Login' });\r\n        },\r\n        personalbar(){\r\n            this.$router.push({ name: 'Personal' });\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNav.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNav.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./HeaderNav.vue?vue&type=template&id=568b07ef&scoped=true\"\nimport script from \"./HeaderNav.vue?vue&type=script&lang=js\"\nexport * from \"./HeaderNav.vue?vue&type=script&lang=js\"\nimport style0 from \"./HeaderNav.vue?vue&type=style&index=0&id=568b07ef&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"568b07ef\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <HeaderNav />\r\n     <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HeaderNav from '../components/HeaderNav.vue'\r\nexport default {\r\n  components:{\r\n    HeaderNav\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Layout.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Layout.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Layout.vue?vue&type=template&id=07c85bbc\"\nimport script from \"./Layout.vue?vue&type=script&lang=js\"\nexport * from \"./Layout.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"咨询师详情\")]),_c('div',[_c('img',{staticStyle:{\"width\":\"150px\",\"height\":\"150px\",\"border-radius\":\"50%\"},attrs:{\"src\":require(\"../assets/head.jpg\")}}),_c('h2',[_vm._v(_vm._s(_vm.consultantName))]),_c('p',[_vm._v(\"咨询师简介：\"+_vm._s(_vm.consultantInfo))])]),(_vm.consultantId)?_c('el-card',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":6}},[_c('div',{staticClass:\"date-list\"},_vm._l((_vm.dateGroups),function(date){return _c('el-button',{key:date.date,staticStyle:{\"margin-bottom\":\"10px\",\"width\":\"100%\"},attrs:{\"type\":_vm.selectedDate === date.date ? 'primary' : ''},on:{\"click\":function($event){_vm.selectedDate = date.date}}},[_vm._v(\"\\n            \"+_vm._s(date.date === 'now' ? '现在在线' : date.date)+\"\\n          \")])}))]),_c('el-col',{attrs:{\"span\":18}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.currentTimes,\"header-row-class-name\":\"custom-header\",\"empty-text\":\"该日期没有可用时间段\"}},[_c('el-table-column',{attrs:{\"label\":\"时间\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                \"+_vm._s(scope.row.time)+\"\\n              \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.selectedDate === 'now')?[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.GotoChat(scope.row,1)}}},[_vm._v(\"\\n                    进入对话\\n                  \")])]:[(scope.row.status === 'available')?_c('el-button',{attrs:{\"type\":\"text\",\"disabled\":!_vm.isAppointmentActive(scope.row)},on:{\"click\":function($event){_vm.createConsultation(scope.row)}}},[_vm._v(\"\\n                    预约\\n                  \")]):_c('span',{staticStyle:{\"color\":\"#999\"}},[_vm._v(\"已满员\")])]]}}])})],1)],1)])],1)],1):_c('p',[_vm._v(\"咨询师信息未找到。\")]),_c('el-dialog',{attrs:{\"title\":\"心理咨询保密协议书\",\"visible\":_vm.showProtocolDialog,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.showProtocolDialog=$event}}},[_c('div',{staticStyle:{\"max-height\":\"400px\",\"overflow-y\":\"auto\",\"margin-bottom\":\"20px\"}},[_c('h3',[_vm._v(\"一、保密内容\")]),_c('p',[_vm._v(\"心理咨询师本着尊重、保护来访者个人隐私的态度，对心理咨询过程中的有关信息，包括个案记录、测验资料、信件、录音和其他资料，均属专业信息，都将在严格保密的情况下进行保存。同时，心理咨询师还必须严格遵守职业道德中保密原则的有关规定，严守咨询个案的相关资料。\")]),_c('h3',[_vm._v(\"二、查阅权限\")]),_c('p',[_vm._v(\"上述保密资料，除华东师范大学心理研究院，任何人均不得查阅。\")]),_c('h3',[_vm._v(\"三、录音授权\")]),_c('p',[_vm._v(\"心理咨询师只有在征得来访者同意的情况下才能对咨询过程进行笔录、录音。\")])]),_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\",\"margin-top\":\"20px\"}},[_c('el-checkbox',{model:{value:(_vm.agreeProtocol),callback:function ($$v) {_vm.agreeProtocol=$$v},expression:\"agreeProtocol\"}},[_vm._v(\"我已阅读并同意此协议\")])],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showProtocolDialog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":!_vm.agreeProtocol},on:{\"click\":_vm.confirmGotoChat}},[_vm._v(\"\\n        确 定\\n      \")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h1>咨询师详情</h1>\r\n    <div>\r\n      <img src=\"../assets/head.jpg\" style=\"width: 150px; height: 150px; border-radius: 50%\" />\r\n            <h2>{{ consultantName }}</h2>\r\n            <p>咨询师简介：{{ consultantInfo }}</p>\r\n            \r\n    </div>\r\n    <el-card v-if=\"consultantId\"> \r\n      <el-row :gutter=\"20\">\r\n        <!-- 左侧日期列 -->\r\n        <el-col :span=\"6\">\r\n          <div class=\"date-list\">\r\n            <el-button \r\n              v-for=\"date in dateGroups\" \r\n              :key=\"date.date\"\r\n              @click=\"selectedDate = date.date\"\r\n              :type=\"selectedDate === date.date ? 'primary' : ''\"\r\n              style=\"margin-bottom: 10px; width: 100%\"\r\n            >\r\n              {{ date.date === 'now' ? '现在在线' : date.date }}\r\n            </el-button>\r\n          </div>\r\n        </el-col>\r\n\r\n        <!-- 右侧时间段 -->\r\n        <el-col :span=\"18\">\r\n          <div style=\"text-align: center\">\r\n            \r\n            <el-table \r\n              :data=\"currentTimes\" \r\n              style=\"width: 100%\" \r\n              header-row-class-name=\"custom-header\"\r\n              empty-text=\"该日期没有可用时间段\"\r\n            >\r\n              <el-table-column label=\"时间\" width=\"180\">\r\n                <template slot-scope=\"scope\">\r\n                  {{ scope.row.time }}\r\n                </template>\r\n              </el-table-column>\r\n\r\n              <el-table-column label=\"操作\" width=\"120\">\r\n                <template slot-scope=\"scope\">\r\n                  <template v-if=\"selectedDate === 'now'\">\r\n                    <el-button \r\n                      type=\"text\"\r\n                      @click=\"GotoChat(scope.row,1)\"\r\n                    >\r\n                      进入对话\r\n                    </el-button>\r\n                  </template>\r\n                  <template v-else>\r\n                    <el-button \r\n                      v-if=\"scope.row.status === 'available'\"\r\n                      type=\"text\"\r\n                      @click=\"createConsultation(scope.row)\"\r\n                      :disabled=\"!isAppointmentActive(scope.row)\"\r\n                    >\r\n                      预约\r\n                    </el-button>\r\n                    <span v-else style=\"color: #999\">已满员</span>\r\n                  </template>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </el-card>\r\n    <p v-else>咨询师信息未找到。</p>\r\n    <el-dialog\r\n      title=\"心理咨询保密协议书\"\r\n      :visible.sync=\"showProtocolDialog\"\r\n      width=\"600px\"\r\n    >\r\n      <div style=\"max-height: 400px; overflow-y: auto; margin-bottom: 20px\">\r\n        <h3>一、保密内容</h3>\r\n        <p>心理咨询师本着尊重、保护来访者个人隐私的态度，对心理咨询过程中的有关信息，包括个案记录、测验资料、信件、录音和其他资料，均属专业信息，都将在严格保密的情况下进行保存。同时，心理咨询师还必须严格遵守职业道德中保密原则的有关规定，严守咨询个案的相关资料。</p>\r\n        \r\n        <h3>二、查阅权限</h3>\r\n        <p>上述保密资料，除华东师范大学心理研究院，任何人均不得查阅。</p>\r\n        \r\n        <h3>三、录音授权</h3>\r\n        <p>心理咨询师只有在征得来访者同意的情况下才能对咨询过程进行笔录、录音。</p>\r\n      </div>\r\n\r\n      <div style=\"display: flex; align-items: center; margin-top: 20px\">\r\n        <el-checkbox v-model=\"agreeProtocol\">我已阅读并同意此协议</el-checkbox>\r\n      </div>\r\n\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"showProtocolDialog = false\">取 消</el-button>\r\n        <el-button \r\n          type=\"primary\" \r\n          @click=\"confirmGotoChat\"\r\n          :disabled=\"!agreeProtocol\"\r\n        >\r\n          确 定\r\n        </el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      consultantId: parseInt(this.$route.params.id),\r\n      token: localStorage.getItem('token'),\r\n      consultantName: '',\r\n      appselectedTime: '',\r\n      consultantInfo:'',\r\n      dateGroups: [],  // 分组后的日期数据\r\n      selectedDate: '', // 当前选中的日期\r\n      showProtocolDialog: false,\r\n      agreeProtocol: false,\r\n      selectedRow: null, // 保存当前选中的时间段\r\n    };\r\n  },\r\n  computed: {\r\n    // 当前选中日期的时间段\r\n    currentTimes() {\r\n      const group = this.dateGroups.find(d => d.date === this.selectedDate);\r\n      return group ? group.times : [];\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchConsultantDetails();\r\n    const consultantData = JSON.parse(sessionStorage.getItem('consultantData'));\r\n    if (consultantData) {\r\n      this.consultantName = consultantData.name;\r\n      this.appselectedTime = consultantData.appselectedTime;\r\n      this.consultantInfo = consultantData.info;\r\n      // 清除存储（可选）\r\n      sessionStorage.removeItem('consultantData');\r\n    }\r\n  },\r\n  \r\n  methods: {\r\n    async fetchConsultantDetails() {\r\n      try {\r\n        const response = await this.$axios.get('/user/consultant', {\r\n          headers: {\r\n            token:this.token, // 获取 JWT Token\r\n          },\r\n          params: { consultantID: this.consultantId }\r\n        });\r\n\r\n        if (response.data.code !== \"1\") {\r\n          this.$message.error('获取信息失败：' + response.data.message);\r\n          return;\r\n        }\r\n\r\n        this.formatConsultants(response.data.data);\r\n      } catch (error) {\r\n        this.$message.error('获取信息失败');\r\n      }\r\n    },\r\n    formatConsultants(data) {\r\n      const groups = {};\r\n      \r\n      Object.entries(data).forEach(([key, value]) => {\r\n        // 处理特殊键\r\n        if (key === \"-999999999-01-01T00:00\") {\r\n          groups['now'] = {\r\n            date: 'now',\r\n            times: [{\r\n              time: '现在在线',\r\n              status: 'available',\r\n              rawTime: key\r\n            }]\r\n          };\r\n          return;\r\n        }\r\n\r\n        // 解析正常时间\r\n        const dateStr = key.split('T')[0];\r\n        const timeStr = key.split('T')[1].slice(0, 5);\r\n        \r\n        if (!groups[dateStr]) {\r\n          groups[dateStr] = {\r\n            date: dateStr,\r\n            times: []\r\n          };\r\n        }\r\n\r\n        groups[dateStr].times.push({\r\n          time: timeStr,\r\n          status: value === \"AVAILABLE\" ? \"available\" : \"busy\",\r\n          rawTime: key\r\n        });\r\n      });\r\n\r\n      // 转换并排序日期\r\n      this.dateGroups = Object.values(groups)\r\n        .sort((a, b) => {\r\n          if (a.date === 'now') return -1; // 'now' 日期排在最前面\r\n          if (b.date === 'now') return 1; // 'now' 日期排在最前面\r\n          b.date === 'now' ? -1 : a.date.localeCompare(b.date);\r\n        })\r\n      // 默认选中第一个日期\r\n      if (this.dateGroups.length > 0) {\r\n        this.selectedDate = this.appselectedTime==='现在在线'? this.dateGroups[0].date:this.appselectedTime;\r\n      }\r\n    },\r\n    // 进入聊天\r\n    GotoChat(row) {\r\n      this.selectedRow = row; // 保存选中的时间段\r\n      this.showProtocolDialog = true; // 显示协议弹窗\r\n    },\r\n    confirmGotoChat() {\r\n      if (!this.agreeProtocol) {\r\n        this.$message.warning('请先阅读并同意协议');\r\n        return;\r\n      }\r\n    \r\n      this.showProtocolDialog = false;\r\n      const params = new URLSearchParams();\r\n      params.append('consultantId', this.consultantId);\r\n      params.append('userId', parseInt(localStorage.getItem('userId')));\r\n      (async () => {\r\n        try {\r\n          const response = await this.$axios.post('/user/session', params, {\r\n            headers: {\r\n              'token': this.token,\r\n              'Content-Type': 'application/x-www-form-urlencoded' // 明确指定内容类型\r\n            }\r\n          });\r\n          \r\n          // 检查 response 是否有 data 属性，并且 code 是否为 \"1\"\r\n          if (response.data && response.data.code === \"1\") {\r\n            const id = response.data.data.sessionId;\r\n            //alert(id); // 调试信息，可以移除或替换为日志记录\r\n            const chatUrl = this.$router.resolve({\r\n              path: `/chat/${id}`,\r\n              query: {\r\n                consultantId: this.consultantId,\r\n                consultantName: this.consultantName,\r\n                appointmentDate: this.selectedRow.time,\r\n                sessionId:id,\r\n              },\r\n            }).href;\r\n\r\n            window.open(chatUrl, '_blank');\r\n            this.agreeProtocol = false; // 重置协议状态\r\n          } else {\r\n            this.$message.error(response.data.msg || '未知错误');\r\n          }\r\n        } catch (error) {\r\n          //console.error(error); // 在控制台输出详细的错误信息以便调试\r\n          this.$message.error('预约失败');\r\n        }\r\n      })();\r\n    },\r\n    // 创建预约\r\n    async createConsultation(row) {\r\n      const appointment = {\r\n        userId: parseInt(localStorage.getItem('userId')),\r\n        consultantId: this.consultantId,\r\n        appointmentDate: this.selectedDate,\r\n        appointmentTime: row.time\r\n      };\r\n\r\n      try {\r\n        const res = await this.$axios.post('/user/book', appointment,{\r\n          headers: {\r\n            token:this.token, // 获取 JWT Token\r\n          },\r\n        });\r\n        if (res.data.code === \"1\") {\r\n          this.$message.success('预约成功');\r\n          this.fetchConsultantDetails(); // 刷新数据\r\n        } else {\r\n          this.$message.error(res.data.msg);\r\n        }\r\n      } catch (error) {\r\n        this.$message.error('预约失败');\r\n      }\r\n    },\r\n    isAppointmentActive(row) {\r\n      return row.status === 'available';\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.date-list {\r\n  padding: 10px;\r\n  border-right: 1px solid #ebeef5;\r\n  width: 80%;\r\n}\r\n.el-button+.el-button {\r\n  margin-left:0px;\r\n}\r\n.custom-header th {\r\n  background-color: #f5f7fa;\r\n}\r\n</style>","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ConsultantDetail.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ConsultantDetail.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ConsultantDetail.vue?vue&type=template&id=76ac052a\"\nimport script from \"./ConsultantDetail.vue?vue&type=script&lang=js\"\nexport * from \"./ConsultantDetail.vue?vue&type=script&lang=js\"\nimport style0 from \"./ConsultantDetail.vue?vue&type=style&index=0&id=76ac052a&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"schedule-container\"},[_c('div',{staticClass:\"header\"},[(_vm.isCalendarView)?_c('div',_vm._l((_vm.monthRange),function(date){return _c('span',{key:date,class:['date-item', { 'selected': _vm.selectedMonth === date }],on:{\"click\":function($event){_vm.onDateClick(date)}}},[_vm._v(\"\\n    \"+_vm._s(date)+\"月\\n  \")])})):_vm._e(),_c('div',{staticStyle:{\"width\":\"20%\",\"height\":\"10px\"}}),_c('button',{on:{\"click\":_vm.toggleView}},[_vm._v(\"\\n      切换至 \"+_vm._s(_vm.isCalendarView ? \"列表\" : \"日历\")+\" 视图\\n    \")])]),(_vm.isCalendarView)?_c('div',{staticClass:\"calendar-view\"},[_vm._l((_vm.weekdays),function(day){return _c('div',{key:day,staticClass:\"weekday\"},[_vm._v(_vm._s(day))])}),_vm._l((_vm.firstDayOffset),function(n){return _c('div',{key:'empty' + n,staticClass:\"day empty\"})}),_vm._l((_vm.monthDays),function(day){return _c('div',{key:day.date,class:['day', { past: day.isPast }],on:{\"click\":function($event){_vm.showSchedule(day.date)}}},[_c('div',[_vm._v(_vm._s(day.date))]),_vm._l((_vm.getDayAppointments(day.date)),function(appointment){return _c('div',{key:appointment.appointmentId,staticClass:\"appointment-slot\"},[(appointment.status === 'booked')?_c('div',{staticClass:\"appointment-item-booked\"},[_vm._v(\"\\n          预约\\n        \")]):(appointment.status === 'completed')?_c('div',{staticClass:\"appointment-item\"},[_vm._v(\"\\n          已完成\\n        \")]):_vm._e()])})],2)})],2):_c('div',{staticClass:\"list-view\"},[_c('h2',[_vm._v(\"会话记录\")]),_c('el-form',{staticClass:\"filter-form\",staticStyle:{\"margin-bottom\":\"16px\"},attrs:{\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"会话时间\"}},[_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.filterDate),callback:function ($$v) {_vm.filterDate=$$v},expression:\"filterDate\"}})],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"background-color\":\"#FFE4B5\",\"color\":\"#8B4513\"},on:{\"click\":_vm.fetchSessions}},[_vm._v(\"\\n        筛选\\n      \")])],1)],1),_c('div',{staticClass:\"session-records\"},[_c('div',{staticClass:\"session-card-container\"},_vm._l((_vm.filteredSessions),function(session){return _c('div',{key:session.sessionId,staticClass:\"session-card\"},[_c('div',{staticClass:\"session-left\"},[_c('p',[_c('strong',[_vm._v(_vm._s(session.startTime))])]),_c('p',[_vm._v(_vm._s(session.consultantName))])]),_c('div',{staticClass:\"session-right\"},[_c('div',{staticClass:\"rating\"},[(session.rating !== null)?_c('el-rate',{attrs:{\"value\":session.rating,\"disabled\":\"\"}}):_vm._e()],1),_c('p',{staticClass:\"feedback\"},[_vm._v(_vm._s(session.feedback || \"未填写评价\"))])]),_c('div',{staticClass:\"session-actions\"},[_c('el-button',{staticStyle:{\"background-color\":\"#FFE4B5\",\"color\":\"#8B4513\",\"border-color\":\"#FFE4B5\"},attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.openDetailDialog(session.sessionId)}}},[_vm._v(\"\\n            咨询详情\\n          \")])],1)])})),_c('el-dialog',{staticClass:\"custom-dialog\",attrs:{\"visible\":_vm.detailDialogVisible,\"show-close\":false,\"title\":\"咨询详情\",\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.detailDialogVisible=$event}}},[_c('div',{staticClass:\"chat-history\"},_vm._l((_vm.sessionHistory),function(msg){return _c('div',{key:msg.time,class:['chat-bubble', msg.senderType ? 'consultant' : 'user']},[_c('div',{staticClass:\"chat-meta\"},[_c('span',{staticClass:\"sender\"},[_vm._v(_vm._s(msg.senderType ? '咨询师' : '来访者'))]),_c('span',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.formatTime(msg.time)))])]),_c('div',{staticClass:\"chat-msg\"},[_vm._v(_vm._s(msg.msg))])])})),_c('div',{staticStyle:{\"text-align\":\"right\",\"margin-top\":\"20px\"}},[_c('el-button',{staticStyle:{\"background-color\":\"#FFE4B5\",\"color\":\"#8B4513\",\"border-color\":\"#FFE4B5\",\"border-radius\":\"6px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.detailDialogVisible = false}}},[_vm._v(\"\\n        关闭\\n      \")])],1)])],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"schedule-container\">\r\n    <div class=\"header\">\r\n      <div v-if=\"isCalendarView\">\r\n      <span \r\n      v-for=\"date in monthRange\" \r\n      :key=\"date\" \r\n      @click=\"onDateClick(date)\"\r\n      :class=\"['date-item', { 'selected': selectedMonth === date }]\"\r\n      >\r\n      {{ date }}月\r\n    </span>\r\n    </div>\r\n    <div style=\"width:20%;height:10px;\"> </div>\r\n      <button @click=\"toggleView\">\r\n        切换至 {{ isCalendarView ? \"列表\" : \"日历\" }} 视图\r\n      </button>\r\n    </div>\r\n    \r\n    <!-- 日历视图 -->\r\n    <div v-if=\"isCalendarView\" class=\"calendar-view\">\r\n      <div v-for=\"day in weekdays\" :key=\"day\" class=\"weekday\">{{ day }}</div>\r\n      <div v-for=\"n in firstDayOffset\" :key=\"'empty' + n\" class=\"day empty\"></div>\r\n      <div\r\n        v-for=\"day in monthDays\"\r\n        :key=\"day.date\"\r\n        :class=\"['day', { past: day.isPast }]\"\r\n        @click=\"showSchedule(day.date)\"\r\n      >\r\n        <div>{{  day.date}}</div>\r\n\r\n        <!-- 展示当天的预约信息 -->\r\n        <div\r\n          v-for=\"(appointment) in getDayAppointments(day.date)\"\r\n          :key=\"appointment.appointmentId\"\r\n          class=\"appointment-slot\"\r\n        >\r\n          <div v-if=\"appointment.status === 'booked'\" class=\"appointment-item-booked\">\r\n            预约\r\n          </div>\r\n          <div v-else-if=\"appointment.status === 'completed'\" class=\"appointment-item\">\r\n            已完成\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 列表视图 -->\r\n    <div v-else  class=\"list-view\">\r\n      <h2>会话记录</h2>\r\n       <!-- 筛选表单 -->\r\n    <el-form :inline=\"true\" class=\"filter-form\" style=\"margin-bottom: 16px;\">\r\n      <el-form-item label=\"会话时间\">\r\n        <el-date-picker\r\n          v-model=\"filterDate\"\r\n          type=\"daterange\"\r\n          range-separator=\"至\"\r\n          start-placeholder=\"开始日期\"\r\n          end-placeholder=\"结束日期\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button\r\n          style=\"background-color: #FFE4B5; \r\n          color: #8B4513;\"\r\n          @click=\"fetchSessions\"\r\n        >\r\n          筛选\r\n        </el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n      <div class=\"session-records\">\r\n      <div class=\"session-card-container\">\r\n        <div class=\"session-card\" v-for=\"session in filteredSessions\" :key=\"session.sessionId\">\r\n          <div class=\"session-left\">\r\n            <p><strong>{{session.startTime}}</strong></p>\r\n            <p>{{ session.consultantName}}</p>\r\n          </div>\r\n          <div class=\"session-right\">\r\n            <div class=\"rating\">\r\n              <el-rate\r\n                v-if=\"session.rating !== null\"\r\n                :value=\"session.rating\"\r\n                disabled\r\n               \r\n              />\r\n\r\n            </div>\r\n            <p class=\"feedback\">{{ session.feedback || \"未填写评价\" }}</p>\r\n          </div>\r\n          <div class=\"session-actions\">\r\n            <el-button size=\"small\" type=\"primary\" \r\n                       style=\"background-color: #FFE4B5; color: #8B4513; border-color: #FFE4B5;\"\r\n                       @click=\"openDetailDialog(session.sessionId)\">\r\n              咨询详情\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  \r\n      <!-- 咨询详情弹窗 -->\r\n      <el-dialog\r\n          :visible.sync=\"detailDialogVisible\"\r\n          :show-close=\"false\"\r\n          title=\"咨询详情\"\r\n          width=\"50%\"\r\n          class=\"custom-dialog\"\r\n        >\r\n        <div class=\"chat-history\">\r\n          <div \r\n            v-for=\"msg in sessionHistory\" \r\n            :key=\"msg.time\" \r\n            :class=\"['chat-bubble', msg.senderType ? 'consultant' : 'user']\"\r\n          >\r\n            <div class=\"chat-meta\">\r\n              <span class=\"sender\">{{ msg.senderType ? '咨询师' : '来访者' }}</span>\r\n              <span class=\"time\">{{ formatTime(msg.time) }}</span>\r\n            </div>\r\n            <div class=\"chat-msg\">{{ msg.msg }}</div>\r\n          </div>\r\n        </div>\r\n        <div style=\"text-align: right; margin-top: 20px;\">\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"detailDialogVisible = false\"\r\n          style=\"background-color: #FFE4B5; color: #8B4513; border-color: #FFE4B5; border-radius: 6px;\"\r\n        >\r\n          关闭\r\n        </el-button>\r\n      </div>\r\n\r\n      </el-dialog>\r\n\r\n    </div>\r\n    </div>\r\n\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      hoverCloseButton: false,\r\n      userId: localStorage.getItem(\"userId\"),\r\n      username: localStorage.getItem(\"username\"),\r\n      token: localStorage.getItem(\"token\"),\r\n      isCalendarView: true,\r\n      currentMonth: new Date().getMonth() + 1,\r\n      currentMonthName: new Intl.DateTimeFormat(\"en\", { month: \"long\" }).format(new Date()),\r\n      weekdays: [\"Mon\", \"Tue\", \"Wed\", \"Thur\", \"Fri\", \"Sat\", \"Sun\"],\r\n      monthDays: [],\r\n      firstDayOffset: 0,\r\n      scheduleList: [],\r\n      showLeaveModal: false, // 控制模态框显示\r\n      leaveReason: \"\", // 用户填写的取消理由\r\n      currentAppointmentId: null, // 当前要取消的预约 ID\r\n      appointments: [],\r\n      monthRange: [], // 用于存储过去三个月的日期数据\r\n      selectedMonth: new Date().getMonth() + 1, // 当前月份\r\n      sessions:[],\r\n      sessionHistory: [], // 用于存储会话记录\r\n      detailDialogVisible: false,\r\n      filterDate: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.generateMonth(); // 生成月份数据\r\n    this.fetchAppointments();\r\n    this.fetchSessions();\r\n  },\r\n  computed:{\r\n    filteredSessions() {\r\n      return [...this.sessions].sort((a, b) => {\r\n        const aTime = new Date(`${a.startTime}`);\r\n        const bTime = new Date(`${b.startTime}`);\r\n        return bTime - aTime;\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchSessions() {\r\n      try {\r\n        const params={ userId: localStorage.getItem(\"userId\") };\r\n        if (this.filterDate && this.filterDate.length === 2) {\r\n          params.startDate = this.formatDate(this.filterDate[0]);\r\n          params.endDate = this.formatDate(this.filterDate[1]);\r\n        }\r\n        const res = await this.$axios.get(\"/user/session/list\", {\r\n          headers: {\r\n            token:this.token, // 获取 JWT Token\r\n          },\r\n          params\r\n        });\r\n        if (res.data.code === \"1\") {\r\n          this.sessions = res.data.data;\r\n          this.sessions.sort((a, b) => {\r\n            // 假设字段名为 a.time，如果是别的名称改成对应字段\r\n            return new Date(b.startTime) - new Date(a.startTime);\r\n          });\r\n          \r\n        } else {\r\n          this.$message.error(\"获取会话列表失败：\" + res.data.msg);\r\n        }\r\n      } catch (err) {\r\n        this.$message.error(\"请求错误：\" + err);\r\n      }\r\n    },\r\n    openDetailDialog(sessionId) {\r\n      this.$axios.get(\"/user/session/history\", {\r\n        headers: { token: this.token },\r\n        params: { sessionId: sessionId },\r\n      }).then(res => {\r\n        if (res.data.code === \"1\") {\r\n          this.sessionHistory = res.data.data;\r\n          this.detailDialogVisible = true;\r\n        }\r\n        else if (res.data.code === \"2\") {\r\n          this.$message(res.data.msg);\r\n        }\r\n        else {\r\n          this.$message.error(\"获取会话列表失败：\" + res.data.msg);\r\n        }\r\n      }).catch(err => {\r\n        this.$message.error(\"请求错误：\" + err);\r\n      });\r\n    },\r\n\r\n    async fetchAppointments() {\r\n      try {\r\n        const response = await this.$axios.get(\"/user/appointments\", {\r\n          headers: { token: this.token },\r\n          params: { userId: parseInt(this.userId, 10) },\r\n        });\r\n        if (response.data.code === \"1\") {\r\n          // 先过滤，再根据 appointmentDate 降序排序（最近的在前）\r\n          this.appointments = response.data.data\r\n            .filter(app => app.status !== \"canceled\")\r\n            .sort((a, b) => new Date(b.appointmentDate) - new Date(a.appointmentDate));\r\n        } else {\r\n          this.appointments = [];\r\n        }\r\n      } catch (error) {\r\n        this.$message.error(\"获取预约数据失败\");\r\n        this.appointments = [];\r\n      } finally {\r\n        this.generateMonthData(this.selectedMonth);\r\n      }\r\n    },\r\n    formatTime(time) {\r\n      const date = new Date(time);\r\n      return `${date.getFullYear()}-${(date.getMonth()+1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${date.getHours().toString().padStart(2,'0')}:${date.getMinutes().toString().padStart(2,'0')}`;\r\n    },\r\n\r\n    async generateMonth(){\r\n      const monthRange = [];\r\n      monthRange[0] = new Date().getMonth() + 1;\r\n      for (let i = 1; i < 3; i++) {\r\n        const month=new Date().getMonth() + 1-i;\r\n        monthRange.push(month);\r\n      }\r\n      const monn=new Date().getMonth()+2;\r\n      this.monthRange = monthRange.reverse(); // 反转数组以显示从当前月份到过去三个月的顺序\r\n      this.monthRange.push(monn);  \r\n    },\r\n    onDateClick(date){\r\n      this.selectedMonth=date;\r\n      this.generateMonthData(this.selectedMonth);\r\n    },\r\n    Tohome(){\r\n      this.$router.push({ path: \"/userHome\" });\r\n    },\r\n    toggleView() {\r\n      this.isCalendarView = !this.isCalendarView;\r\n    },\r\n    showSchedule(date) {\r\n      this.isCalendarView = false;\r\n      this.$nextTick(() => {\r\n        const target = this.scheduleList.find((item) => item.date === date);\r\n        if (target) {\r\n          document.querySelector(`tr[data-date=\"${date}\"]`).scrollIntoView();\r\n        }\r\n      });\r\n    },\r\n    formatDisplayDate(date){\r\n      const [, d] = date.split(/[-/]/);\r\n     \r\n      // const month = m.padStart(2, '0');\r\n      const day = d.padStart(2, '0');\r\n      return Number(day);\r\n    },\r\n    \r\n    cancelAppointment(appointmentId, cancellationReason) {\r\n      this.$axios\r\n        .post(\"/user/cancel\", {\r\n          headers: {\r\n            token:this.token, // 获取 JWT Token\r\n          },\r\n          appointmentId: parseInt(appointmentId, 10),\r\n          cancellationReason: cancellationReason,\r\n        })\r\n        .then(() => {\r\n          this.$message.success(\"预约已取消\");\r\n          this.fetchAppointments(); // 刷新数据\r\n        })\r\n        .catch(() => {\r\n          this.$message.error(\"取消预约失败，请稍后重试\");\r\n        });\r\n    },\r\n    openCancelModal(appointmentId) {\r\n      this.currentAppointmentId = appointmentId; // 设置当前预约 ID\r\n      this.showLeaveModal = true; // 显示模态框\r\n    },\r\n    closeCancelModal() {\r\n      this.showLeaveModal = false; // 关闭模态框\r\n      this.leaveReason = \"\"; // 清空取消理由\r\n      this.currentAppointmentId = null; // 清空当前预约 ID\r\n    },\r\n    submitCancel() {\r\n      if (!this.leaveReason.trim()) {\r\n        alert(\"请填写取消理由\");\r\n        return;\r\n      }\r\n      this.cancelAppointment(this.currentAppointmentId, this.leaveReason); // 提交取消请求\r\n      this.closeCancelModal(); // 关闭模态框\r\n    },\r\n    generateMonthData(date) {\r\n      const year = 2025; // 固定为2025年\r\n      const month = date-1; // 转换为0-11\r\n      const daysInMonth = new Date(year, month + 1, 0).getDate();\r\n\r\n      // 计算首日偏移\r\n      const firstDay = new Date(year, month, 1).getDay();\r\n      this.firstDayOffset = firstDay === 0 ? 6 : firstDay - 1;\r\n\r\n      // 生成日期数组\r\n      this.monthDays = Array.from({ length: daysInMonth }, (_, i) => {\r\n        const day = i + 1;\r\n        return {\r\n          date: `${this.selectedMonth}-${day}`,\r\n          day: day,\r\n          isPast: new Date(year, month, day) < new Date(), // 正确判断过去日期\r\n        };\r\n      });\r\n    },\r\n    getDayAppointments(date) {\r\n      const [month, day] = date.split(\"-\").map(Number);\r\n      const fullDate = `2025-${month.toString().padStart(2, \"0\")}-${day.toString().padStart(2, \"0\")}`;\r\n      return this.appointments.filter(\r\n        (app) => app.appointmentDate === fullDate\r\n      );\r\n    },\r\n    formatDate(date) {\r\n      const d = new Date(date);\r\n      const year = d.getFullYear();\r\n      const month = (`0${d.getMonth() + 1}`).slice(-2);\r\n      const day = (`0${d.getDate()}`).slice(-2);\r\n      return `${year}-${month}-${day}`;\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 样式保持不变 */\r\n.schedule-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  flex-direction: column;\r\n  padding: 20px;\r\n  background-color: white;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  border: 1px solid #7a3b10; \r\n  border-radius: 20px;\r\n}\r\n/* 如果你仅想让内容区不滚动穿透，可以这样写 */\r\n.custom-dialog /deep/ .el-dialog__body {\r\n  overflow: hidden;\r\n}\r\n\r\n.filter-form {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n.header {\r\n  text-align: right;\r\n  margin-bottom: 10px;\r\n}\r\n.el-button:hover {\r\n  background-color: #fff5e0 !important; /* 比#FFE4B5更浅 */\r\n  color: #8B4513 !important;\r\n}\r\n\r\nbutton {\r\n  padding: 5px 10px;\r\n  background-color: #8b4513;\r\n  color: white;\r\n  border: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.weekday {\r\n  \r\n  grid-template-columns: repeat(7, 1fr);\r\n  gap: 5px;\r\n  text-align: center;\r\n  font-weight: bold;\r\n  color: #8b4513;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.calendar-view {\r\n  display: grid;\r\n  grid-template-columns: repeat(7, 1fr);\r\n  gap: 10px;\r\n}\r\n\r\n.day {\r\n  min-height:50px;\r\n  max-height:120px;\r\n  border: 1px solid #ccc;\r\n  text-align: center;\r\n  position: relative;\r\n  cursor: pointer;\r\n}\r\n\r\n.day.past {\r\n  background: #ddd;\r\n  max-height:120px;\r\n}\r\n\r\n.appointment-slot {\r\n  position: static; /* 移除绝对定位 */\r\n  width: 100%; /* 占满父容器宽度 */\r\n  margin: 2px 0; /* 上下间距 */\r\n  border-radius: 4px; /* 圆角 */\r\n  font-size: 10px;\r\n  text-align: center; /* 文本居中 */\r\n}\r\n\r\n.appointment-item {\r\n  margin: 0px 0;\r\n  padding: 2px 5px;\r\n  background-color: #FFE4B5;\r\n  border-radius: 4px;\r\n  font-size: 10px;\r\n}\r\n.appointment-item-booked{\r\n  margin: 0px 0;\r\n  padding: 2px 5px;\r\n  background-color: #d1f8c6;\r\n  border-radius: 4px;\r\n  font-size: 10px;\r\n}\r\n.navTohome{\r\n  font-size: 14px;\r\n  float:right;\r\n  color:#999;\r\n  background-color:white ;\r\n}\r\n.navTohome:hover{\r\n  color:#333;\r\n  cursor:pointer;\r\n}\r\n.list-view {\r\n  max-height: 550px; /* 根据需求调整高度 */\r\n  overflow-y: auto;\r\n  display: block;\r\n}\r\n.list-view thead {\r\n  position: sticky;\r\n  top: 0;\r\n  background: white; /* 避免透明背景 */\r\n  z-index: 1;\r\n}\r\n.list-view table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n.chat-history {\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n  padding: 16px;\r\n  background-color: #f9f9f9;\r\n  border-radius: 10px;\r\n}\r\n\r\n.chat-bubble {\r\n  max-width: 75%;\r\n  margin-bottom: 12px;\r\n  padding: 12px 16px;\r\n  border-radius: 16px;\r\n  word-wrap: break-word;\r\n  line-height: 1.6;\r\n  font-size: 14px;\r\n  position: relative;\r\n  box-shadow: 0 2px 6px rgba(0,0,0,0.05);\r\n}\r\n\r\n.consultant {\r\n  background-color: #fffbe6;\r\n  align-self: flex-start;\r\n  border: 1px solid #ffecb3;\r\n  border-top-left-radius: 0;\r\n}\r\n\r\n.user {\r\n  background-color: #e6f7ff;\r\n  align-self: flex-end;\r\n  margin-left: auto;\r\n  border: 1px solid #b3e5fc;\r\n  border-top-right-radius: 0;\r\n}\r\n\r\n.chat-meta {\r\n  font-size: 12px;\r\n  color: #888;\r\n  margin-bottom: 4px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.chat-msg {\r\n  white-space: pre-wrap;\r\n}\r\n\r\n.el-dialog__body {\r\n  padding-top: 10px;\r\n}\r\n\r\n.custom-dialog .el-dialog__header {\r\n  border-bottom: 1px solid #f0f0f0;\r\n  margin-bottom: 10px;\r\n}\r\n.list-view th,\r\n.list-view td {\r\n  border: 1px solid #ccc;\r\n  padding: 10px;\r\n  text-align: center;\r\n}\r\n.date-item {\r\n  font-size: 16px;\r\n  padding: 5px 10px;\r\n  border-radius: 5px;\r\n  background-color: white;\r\n  margin-right:5px;\r\n  border:solid 1px #5c3317;\r\n  flex-shrink: 0;\r\n}\r\n.date-item.selected {\r\n    background-color: #5c3317;\r\n    color: #f2f1e4;\r\n}\r\n.completed {\r\n  color: green;\r\n}\r\n\r\n.pending {\r\n  color: gray;\r\n}\r\n.modal {\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background: white;\r\n  padding: 20px;\r\n  border: 1px solid #ccc;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal textarea {\r\n  width: 100%;\r\n  height: 100px;\r\n  margin-bottom: 10px;\r\n  padding: 5px;\r\n  border: 1px solid #ccc;\r\n}\r\n\r\n.modal button {\r\n  margin-right: 10px;\r\n  padding: 5px 10px;\r\n  background-color: #8B4513;\r\n  color: white;\r\n  border: none;\r\n  cursor: pointer;\r\n}\r\n.session-records {\r\n    padding: 20px;\r\n  }\r\n  \r\n  .session-card-container {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n    gap: 20px;\r\n    padding: 10px 0;\r\n  }\r\n  \r\n  .session-card {\r\n    background-color: white;\r\n    border: 1px solid #FFE4B5;\r\n    border-radius: 12px;\r\n    padding: 16px;\r\n    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\r\n    display: flex;\r\n    justify-content: space-between;\r\n    flex-wrap: wrap;\r\n  }\r\n  \r\n  .session-left, .session-right {\r\n    width: 45%;\r\n  }\r\n  \r\n  .session-left p {\r\n    margin: 6px 0;\r\n    font-size: 14px;\r\n  }\r\n  \r\n  .session-right .rating {\r\n    margin-bottom: 8px;\r\n  }\r\n  \r\n  .feedback {\r\n    font-size: 13px;\r\n    color: #666;\r\n  }\r\n  \r\n  .session-actions {\r\n    width: 100%;\r\n    margin-top: 10px;\r\n    text-align: right;\r\n  }\r\n  \r\n  .chat-history {\r\n    max-height: 400px;\r\n    overflow-y: auto;\r\n    padding: 10px;\r\n    background-color: #fafafa;\r\n    border: 1px solid #eee;\r\n    border-radius: 8px;\r\n  }\r\n  \r\n  .msg-user,\r\n  .msg-consultant {\r\n    margin: 10px 0;\r\n    padding: 8px;\r\n    border-radius: 6px;\r\n    background-color: #fef6e0;\r\n  }\r\n  \r\n  .msg-consultant {\r\n    background-color: #e0f7fa;\r\n  }\r\n  \r\n  .time {\r\n    display: block;\r\n    font-size: 12px;\r\n    color: #999;\r\n    margin-top: 4px;\r\n  }\r\n</style>","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MySchedule.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MySchedule.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MySchedule.vue?vue&type=template&id=854e487a&scoped=true\"\nimport script from \"./MySchedule.vue?vue&type=script&lang=js\"\nexport * from \"./MySchedule.vue?vue&type=script&lang=js\"\nimport style0 from \"./MySchedule.vue?vue&type=style&index=0&id=854e487a&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"854e487a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chat-container\"},[_c('header',{staticClass:\"chat-header\"},[_c('div',{staticClass:\"header-left\"},[_c('div',{staticClass:\"connection-status\",class:{ connected: _vm.isConnected }},[_vm._v(\"\\n        ● \"+_vm._s(_vm.connectionStatusText)+\"\\n      \")]),_c('countdown-timer',{attrs:{\"initial-time\":_vm.remainingTime,\"session-id\":_vm.sessionId,\"is-active\":_vm.sessionStarted},on:{\"time-up\":_vm.handleTimeUp,\"tick\":_vm.handleTick}})],1),_c('button',{staticClass:\"end-session-btn\",on:{\"click\":function($event){_vm.showConfirm = true}}},[_vm._v(\"\\n      结束会话\\n    \")])]),_c('ChatContainer',{ref:\"chatScroll\",staticClass:\"main-chat\",attrs:{\"messages\":_vm.messages}}),_c('ChatMessages',{on:{\"send-message\":_vm.addMessage}}),_c('history-sidebar',{staticClass:\"history-sidebar\",attrs:{\"history\":_vm.chatHistory},model:{value:(_vm.sidebarVisible),callback:function ($$v) {_vm.sidebarVisible=$$v},expression:\"sidebarVisible\"}}),(_vm.showConfirm)?_c('div',{staticClass:\"confirm-dialog\"},[_c('div',{staticClass:\"dialog-content\"},[_c('p',[_vm._v(\"是否确定要结束本次会话？\")]),_c('div',{staticClass:\"dialog-btns\"},[_c('button',{on:{\"click\":_vm.handleShowRating}},[_vm._v(\"确定\")]),_c('button',{on:{\"click\":function($event){_vm.showConfirm = false}}},[_vm._v(\"取消\")])])])]):_vm._e(),(_vm.showRatingDialog)?_c('div',{staticClass:\"confirm-dialog\"},[_c('div',{staticClass:\"dialog-content\"},[_c('h3',[_vm._v(\"请为本次会话打分\")]),_c('div',{staticClass:\"star-rating\"},_vm._l((5),function(n){return _c('span',{key:n,staticClass:\"star\",class:{ filled: n <= _vm.rating },on:{\"click\":function($event){_vm.setRating(n)}}},[_vm._v(\"★\")])})),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.feedback),expression:\"feedback\"}],staticClass:\"feedback-box\",attrs:{\"placeholder\":\"留下你的评价（可选）\"},domProps:{\"value\":(_vm.feedback)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.feedback=$event.target.value}}}),_c('div',{staticClass:\"dialog-btns\"},[_c('button',{on:{\"click\":_vm.submitRating}},[_vm._v(\"提交\")])])])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chat-container\"},_vm._l((_vm.messages),function(msg,index){return _c('div',{key:index,staticClass:\"message-row\",class:{\n      'user-message': msg.from === 'user',\n      'system-message': msg.from === 'system'  // 新增系统消息样式\n    }},[_c('message-bubble',{attrs:{\"message\":msg}})],1)}))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message-container\",class:{\n       'user-container': _vm.message.from === 'user',\n       'system-container': _vm.message.from === 'system'\n     }},[(_vm.message.from !== 'system')?_c('div',{staticClass:\"avatar\"},[(!_vm.message.avatar)?_c('span',[_vm._v(_vm._s(_vm.messageAvatar))]):_c('img',{attrs:{\"src\":_vm.src/_vm.assets/_vm.head2.jpg,\"alt\":\"avatar\"}})]):_vm._e(),_c('div',{staticClass:\"message-bubble\",class:{\n         'user-message': _vm.message.from === 'user',\n         'system-message': _vm.message.from === 'system'\n       }},[_c('div',{staticClass:\"content\"},[_vm._v(_vm._s(_vm.message.text))]),_c('div',{staticClass:\"timestamp\"},[_vm._v(_vm._s(_vm.message.time))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"message-container\" \r\n       :class=\"{\r\n         'user-container': message.from === 'user',\r\n         'system-container': message.from === 'system'\r\n       }\">\r\n    <!-- 非系统消息显示头像 -->\r\n    <div class=\"avatar\" v-if=\"message.from !== 'system'\">\r\n      <span v-if=\"!message.avatar\">{{ messageAvatar }}</span>\r\n      <img v-else :src=\"src/assets/head2.jpg\" alt=\"avatar\">\r\n    </div>\r\n\r\n    <div class=\"message-bubble\" \r\n         :class=\"{\r\n           'user-message': message.from === 'user',\r\n           'system-message': message.from === 'system'\r\n         }\">\r\n      <div class=\"content\">{{ message.text }}</div>\r\n      <div class=\"timestamp\">{{ message.time }}</div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    message: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  computed: {\r\n    // 生成头像占位文字（取发送者首字母）\r\n    messageAvatar() {\r\n      return this.message.from==='user'?'Q':'A';\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.message-container {\r\n  display: flex;\r\n  gap: 12px;\r\n  max-width: 85%;\r\n  margin: 8px 0;\r\n  align-items: flex-start;\r\n}\r\n\r\n/* 用户消息容器（头像在右侧） */\r\n.user-container {\r\n  flex-direction: row-reverse;\r\n  margin-left: auto;\r\n}\r\n\r\n/* 系统消息容器 */\r\n.system-container {\r\n  margin: 8px auto;\r\n  max-width: 100%;\r\n}\r\n\r\n.avatar {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  background: #e0e0e0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 18px;\r\n  color: #666;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.avatar img {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n}\r\n\r\n.message-bubble {\r\n  /* 原有样式保持不变 */\r\n  max-width: 70%;\r\n  padding: 12px 16px;\r\n  border-radius: 15px;\r\n  word-break: break-word;\r\n  position: relative;\r\n}\r\n\r\n/* 调整消息最大宽度 */\r\n.user-message {\r\n  max-width: calc(100% - 60px); /* 留出头像空间 */\r\n}\r\n\r\n/* 系统消息隐藏头像 */\r\n.system-container .avatar {\r\n  display: none;\r\n}\r\n\r\n/* 原有消息颜色样式保持不变 */\r\n.user-message {\r\n  background: #409EFF;\r\n  color: white;\r\n  border-radius: 15px 5px 15px 15px;\r\n}\r\n\r\n.system-message {\r\n  background: #f7f3f3;\r\n  color: #666;\r\n  border-radius: 20px;\r\n}\r\n\r\n/* 其他消息样式调整 */\r\n.message-bubble:not(.user-message):not(.system-message) {\r\n  border-radius: 5px 15px 15px 15px;\r\n  background-color: aliceblue;\r\n  max-width: calc(100% - 60px); /* 留出头像空间 */\r\n}\r\n\r\n/* 时间戳样式保持不变 */\r\n.timestamp {\r\n  font-size: 0.75rem;\r\n  color: #666;\r\n  margin-top: 4px;\r\n  text-align: right;\r\n}\r\n\r\n.system-message .timestamp {\r\n  text-align: center;\r\n  color: #999;\r\n}\r\n\r\n.user-message .timestamp {\r\n  color: rgba(255,255,255,0.8);\r\n}\r\n</style>","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageBubble.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageBubble.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MessageBubble.vue?vue&type=template&id=314c23fb&scoped=true\"\nimport script from \"./MessageBubble.vue?vue&type=script&lang=js\"\nexport * from \"./MessageBubble.vue?vue&type=script&lang=js\"\nimport style0 from \"./MessageBubble.vue?vue&type=style&index=0&id=314c23fb&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"314c23fb\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"chat-container\">\r\n    <div \r\n      v-for=\"(msg, index) in messages\" \r\n      :key=\"index\" \r\n      class=\"message-row\"\r\n      :class=\"{\r\n        'user-message': msg.from === 'user',\r\n        'system-message': msg.from === 'system'  // 新增系统消息样式\r\n      }\"\r\n    >\r\n\r\n      <message-bubble :message=\"msg\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MessageBubble from '@/components/MessageBubble'\r\n\r\nexport default {\r\n  components: { MessageBubble },\r\n  props: {\r\n    messages: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n  flex: 1;\r\n  width: 100%; /* 添加这个属性 */\r\n  /* margin: 0 auto;  注释或删除这个属性 */\r\n  padding: 20px;\r\n  overflow-y: auto;\r\n}\r\n.message-row {\r\n  margin-bottom: 15px;\r\n  display: flex;\r\n  justify-content: flex-start; /* 默认左侧对齐 */\r\n}\r\n\r\n.message-row.user-message {\r\n  justify-content: flex-end; /* 用户消息右侧对齐 */\r\n}\r\n\r\n.message-row.system-message {\r\n  justify-content: center;  /* 关键设置 */\r\n}\r\n</style>","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatContainer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatContainer.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatContainer.vue?vue&type=template&id=bb49b3b8&scoped=true\"\nimport script from \"./ChatContainer.vue?vue&type=script&lang=js\"\nexport * from \"./ChatContainer.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatContainer.vue?vue&type=style&index=0&id=bb49b3b8&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bb49b3b8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chat-input\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputText),expression:\"inputText\"}],attrs:{\"placeholder\":\"输入消息...\"},domProps:{\"value\":(_vm.inputText)},on:{\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();return _vm.onEnter($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.inputText=$event.target.value}}}),_c('button',{attrs:{\"disabled\":!_vm.inputText.trim()},on:{\"click\":_vm.send}},[_vm._v(\"发送\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"chat-input\">\r\n    <!-- 修正 self-closing 标签并支持 Shift+Enter 换行 -->\r\n    <textarea\r\n      v-model=\"inputText\"\r\n      @keydown.enter.prevent=\"onEnter\"\r\n      placeholder=\"输入消息...\"\r\n    ></textarea>\r\n    <button @click=\"send\" :disabled=\"!inputText.trim()\">发送</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      inputText: ''\r\n    }\r\n  },\r\n  methods: {\r\n    // 处理回车：Shift+Enter 插入换行，纯 Enter 发送\r\n    onEnter(e) {\r\n      if (e.shiftKey) {\r\n        // 插入换行\r\n        const pos = e.target.selectionStart\r\n        this.inputText = this.inputText.slice(0, pos) + '\\n' + this.inputText.slice(pos)\r\n        this.$nextTick(() => {\r\n          e.target.selectionStart = e.target.selectionEnd = pos + 1\r\n        })\r\n      } else {\r\n        this.send()\r\n      }\r\n    },\r\n    send() {\r\n      const text = this.inputText.trim()\r\n      if (!text) return\r\n      this.$emit('send-message', text)\r\n      this.inputText = ''\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-input {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  display: flex;\r\n  padding: 10px 20px;\r\n  background: #f5f5f5;\r\n  box-shadow: 0 -1px 5px rgba(0,0,0,0.1);\r\n}\r\n\r\n.chat-input textarea {\r\n  flex: 1;\r\n  resize: vertical;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  min-height: 40px;\r\n  max-height: 120px;\r\n  padding: 6px;\r\n  line-height: 1.4;\r\n  font-size: 14px;\r\n}\r\n\r\n.chat-input button {\r\n  margin-left: 10px;\r\n  background: #409EFF;\r\n  color: #fff;\r\n  border: none;\r\n  padding: 0 16px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n.chat-input button:disabled {\r\n  background: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessages.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessages.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatMessages.vue?vue&type=template&id=11c8c508&scoped=true\"\nimport script from \"./ChatMessages.vue?vue&type=script&lang=js\"\nexport * from \"./ChatMessages.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatMessages.vue?vue&type=style&index=0&id=11c8c508&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11c8c508\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"countdown-timer\",class:{ 'blink': _vm.shouldBlink }},[_vm._v(\"\\n    \"+_vm._s(_vm.formattedTime)+\"\\n  \")]),(_vm.remainingTime <= _vm.warningThreshold && _vm.remainingTime > 0)?_c('div',{staticClass:\"warning-text\"},[_vm._v(\"\\n    咨询马上结束，请注意时间\\n  \")]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"countdown-timer\" :class=\"{ 'blink': shouldBlink }\">\r\n      {{ formattedTime }}\r\n    </div>\r\n    <div v-if=\"remainingTime <= warningThreshold && remainingTime > 0\" class=\"warning-text\">\r\n      咨询马上结束，请注意时间\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    initialTime: {\r\n      type: Number,\r\n      required: true\r\n    },\r\n    sessionId: {\r\n      type: [String, Number],\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      remainingTime: this.initialTime, // 使用传入的 initialTime 初始化\r\n      shouldBlink: false,\r\n      warningThreshold: 10 * 60, // 10分钟\r\n      timer: null,\r\n      currentEndTime: Date.now() + this.initialTime * 1000 // 初始结束时间\r\n    };\r\n  },\r\n  computed: {\r\n    formattedTime() {\r\n      const minutes = Math.floor(this.remainingTime / 60);\r\n      const seconds = this.remainingTime % 60;\r\n      return `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n    },\r\n    endTimeKey() {\r\n      return `countdown_${this.sessionId}`;\r\n    }\r\n  },\r\n  watch: {\r\n    remainingTime(newVal) {\r\n      if (newVal === 5 * 60 || newVal === 60) {\r\n        this.triggerBlink();\r\n      }\r\n    },\r\n    sessionId() {\r\n      this.initializeTimer();\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initializeTimer();\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.timer);\r\n  },\r\n  methods: {\r\n    initializeTimer() {\r\n      clearInterval(this.timer);\r\n\r\n      let endTime = localStorage.getItem(this.endTimeKey);\r\n\r\n      if (!endTime) {\r\n        endTime = Date.now() + this.initialTime * 1000;\r\n        localStorage.setItem(this.endTimeKey, endTime);\r\n      }\r\n\r\n      this.currentEndTime = parseInt(endTime, 10);\r\n      this.updateRemaining();\r\n      this.timer = setInterval(this.updateRemaining, 1000);\r\n    },\r\n    updateRemaining() {\r\n      const now = Date.now();\r\n      const seconds = Math.max(0, Math.floor((this.currentEndTime - now) / 1000));\r\n      this.remainingTime = seconds;\r\n\r\n      if (seconds === 0) {\r\n        this.handleTimeExpired();\r\n      }\r\n    },\r\n    handleTimeExpired() {\r\n      clearInterval(this.timer);\r\n      localStorage.removeItem(this.endTimeKey);\r\n      this.$emit('time-up');\r\n    },\r\n    triggerBlink() {\r\n      this.shouldBlink = true;\r\n      setTimeout(() => {\r\n        this.shouldBlink = false;\r\n      }, 2000);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.countdown-timer {\r\n  font-size: 1.2rem;\r\n  font-weight: bold;\r\n}\r\n\r\n.blink {\r\n  animation: blink 1s linear infinite;\r\n  color: #ff4444;\r\n}\r\n\r\n@keyframes blink {\r\n  50% { opacity: 0; }\r\n}\r\n\r\n.warning-text {\r\n  margin-top: 4px;\r\n  font-size: 0.9rem;\r\n  color: #e6a23c;\r\n}\r\n</style>","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./CountdownTimer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./CountdownTimer.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CountdownTimer.vue?vue&type=template&id=7a138be1&scoped=true\"\nimport script from \"./CountdownTimer.vue?vue&type=script&lang=js\"\nexport * from \"./CountdownTimer.vue?vue&type=script&lang=js\"\nimport style0 from \"./CountdownTimer.vue?vue&type=style&index=0&id=7a138be1&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a138be1\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"history-sidebar\",class:{ 'open': _vm.value }},[_c('div',{staticClass:\"sidebar-header\"},[_c('h3',[_vm._v(\"历史会话记录\")]),_c('button',{on:{\"click\":function($event){_vm.$emit('input', false)}}},[_vm._v(\"×\")])]),_c('div',{staticClass:\"history-list\"},_vm._l((_vm.history),function(item,index){return _c('div',{key:index,staticClass:\"history-item\"},[_c('div',{staticClass:\"therapist\"},[_vm._v(_vm._s(item.therapist))]),_c('div',{staticClass:\"date\"},[_vm._v(_vm._s(item.date))])])}))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- /src/components/HistorySidebar.vue -->\r\n<template>\r\n  <div class=\"history-sidebar\" :class=\"{ 'open': value }\">\r\n    <div class=\"sidebar-header\">\r\n      <h3>历史会话记录</h3>\r\n      <button @click=\"$emit('input', false)\">×</button>\r\n    </div>\r\n    <div class=\"history-list\">\r\n      <div v-for=\"(item, index) in history\" :key=\"index\" class=\"history-item\">\r\n        <div class=\"therapist\">{{ item.therapist }}</div>\r\n        <div class=\"date\">{{ item.date }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    value: Boolean, // 控制侧边栏开关\r\n    history: Array\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.history-sidebar {\r\n  background: #fff;\r\n  width: 300px;\r\n  height: 100%;\r\n  position: fixed;\r\n  right: -300px;\r\n  top: 0;\r\n  transition: right 0.3s ease;\r\n  box-shadow: -2px 0 5px rgba(0,0,0,0.1);\r\n}\r\n\r\n.history-sidebar.open {\r\n  right: 0;\r\n}\r\n\r\n.sidebar-header {\r\n  padding: 20px;\r\n  border-bottom: 1px solid #eee;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.history-list {\r\n  padding: 15px;\r\n}\r\n\r\n.history-item {\r\n  padding: 10px;\r\n  margin-bottom: 10px;\r\n  border-radius: 5px;\r\n  background: #f8f9fa;\r\n  cursor: pointer;\r\n}\r\n\r\n.history-item:hover {\r\n  background: #e9ecef;\r\n}\r\n</style>","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./HistorySidebar.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./HistorySidebar.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./HistorySidebar.vue?vue&type=template&id=33668128&scoped=true\"\nimport script from \"./HistorySidebar.vue?vue&type=script&lang=js\"\nexport * from \"./HistorySidebar.vue?vue&type=script&lang=js\"\nimport style0 from \"./HistorySidebar.vue?vue&type=style&index=0&id=33668128&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"33668128\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"chat-container\">\r\n    <!-- 顶部导航栏 -->\r\n    <header class=\"chat-header\">\r\n      <div class=\"header-left\">\r\n        <div class=\"connection-status\" :class=\"{ connected: isConnected }\">\r\n          ● {{ connectionStatusText }}\r\n        </div>\r\n        <countdown-timer \r\n          :initial-time=\"remainingTime\"\r\n          :session-id=\"sessionId\"\r\n          @time-up=\"handleTimeUp\"\r\n          @tick=\"handleTick\" \r\n          :is-active=\"sessionStarted\"\r\n        />\r\n      </div>\r\n      <button class=\"end-session-btn\" @click=\"showConfirm = true\">\r\n        结束会话\r\n      </button>\r\n    </header>\r\n\r\n    <!-- 主聊天区域 -->\r\n    <ChatContainer ref=\"chatScroll\"  :messages=\"messages\" class=\"main-chat\" />\r\n    <!-- 消息输入区 -->\r\n    <ChatMessages @send-message=\"addMessage\" />\r\n\r\n    <!-- 历史记录侧边栏 -->\r\n    <history-sidebar \r\n      v-model=\"sidebarVisible\"\r\n      :history=\"chatHistory\"\r\n      class=\"history-sidebar\"\r\n    />\r\n\r\n    <!-- 结束会话确认对话框 -->\r\n    <div v-if=\"showConfirm\" class=\"confirm-dialog\">\r\n      <div class=\"dialog-content\">\r\n        <p>是否确定要结束本次会话？</p>\r\n        <div class=\"dialog-btns\">\r\n          <button @click=\"handleShowRating\">确定</button>\r\n          <button @click=\"showConfirm = false\">取消</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 评分弹窗 -->\r\n    <div v-if=\"showRatingDialog\" class=\"confirm-dialog\">\r\n      <div class=\"dialog-content\">\r\n        <h3>请为本次会话打分</h3>\r\n        <div class=\"star-rating\">\r\n          <span \r\n            v-for=\"n in 5\" \r\n            :key=\"n\" \r\n            class=\"star\" \r\n            :class=\"{ filled: n <= rating }\" \r\n            @click=\"setRating(n)\"\r\n          >★</span>\r\n        </div>\r\n        <textarea \r\n          v-model=\"feedback\" \r\n          placeholder=\"留下你的评价（可选）\" \r\n          class=\"feedback-box\"\r\n        ></textarea>\r\n        <div class=\"dialog-btns\">\r\n          <button @click=\"submitRating\">提交</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport dayjs from 'dayjs'\r\nimport ChatContainer from '@/components/ChatContainer'\r\nimport ChatMessages from '@/components/ChatMessages'\r\nimport CountdownTimer from '@/components/CountdownTimer'\r\nimport HistorySidebar from '@/components/HistorySidebar'\r\n\r\nexport default {\r\n  components: {\r\n    ChatContainer,\r\n    ChatMessages,\r\n    CountdownTimer,\r\n    HistorySidebar\r\n  },\r\n  data() {\r\n    return {\r\n      sessionStarted: false,\r\n      sessionEnded: false,\r\n      messages: [],\r\n      chatHistory: [],\r\n      sidebarVisible: false,\r\n      showConfirm: false,\r\n      showRatingDialog: false,\r\n      rating: 0,\r\n      feedback: '',\r\n      //sessionId: parseInt(this.$route.params.sessionId),\r\n      remainingTime: parseInt(localStorage.getItem(`countdown_${this.sessionId}`)) || 3600,\r\n      ws: null,\r\n      reconnectAttempts: 0,\r\n      maxReconnectAttempts: 5,\r\n      isConnected: false\r\n    }\r\n  },\r\n  computed: {\r\n    wsUrl() {\r\n      const { host } = window.location;  // 包含域名和端口，若同端口部署则不需单独填写\r\n      const token = localStorage.getItem('token');\r\n      //alert(this.sessionId);\r\n      return `ws://${host}/chat?token=${token}&sessionId=${this.sessionId}&type=0`;\r\n    },\r\n    connectionStatusText() {\r\n      return this.isConnected ? '已连接' : '连接中...'\r\n    }\r\n  },\r\n  watch: {\r\n    sessionId() {\r\n      this.initializeWebSocket()\r\n    },\r\n    messages() {\r\n    this.$nextTick(() => {\r\n      this.scrollToBottom()\r\n    })\r\n  }\r\n  },\r\n  created() {\r\n    this.sessionId       = parseInt(this.$route.query.sessionId,10)\r\n    this.initializeWebSocket()\r\n    window.addEventListener('beforeunload', this.handleBeforeUnload)\r\n    window.addEventListener('beforeunload', this.confirmBeforeUnload)\r\n    this.fetchHistory()\r\n  },\r\n  beforeDestroy() {\r\n    this.cleanupWebSocket()\r\n    window.removeEventListener('beforeunload', this.handleBeforeUnload)\r\n    window.removeEventListener('beforeunload', this.confirmBeforeUnload)\r\n  },\r\n  methods: {\r\n    scrollToBottom: function () {\r\n      // 兼容不支持可选链的写法\r\n      var chatScroll = this.$refs.chatScroll;\r\n      var container = chatScroll && chatScroll.$el ? chatScroll.$el : chatScroll;\r\n      if (container) {\r\n        // 如果 ChatContainer 最外层就是滚动元素\r\n        container.scrollTop = container.scrollHeight;\r\n      }\r\n    },\r\n    async initializeWebSocket() {\r\n      this.cleanupWebSocket()\r\n      \r\n      try {\r\n        this.ws = new WebSocket(this.wsUrl)\r\n        this.setupWebSocketHandlers()\r\n      } catch (error) {\r\n        //console.error('WebSocket连接失败:', error)\r\n        this.handleReconnect()\r\n      }\r\n    },\r\n\r\n    setupWebSocketHandlers() {\r\n      this.ws.onopen = () => {\r\n        //alert('WebSocket connected')\r\n        this.isConnected = true\r\n        this.reconnectAttempts = 0\r\n      }\r\n\r\n      this.ws.onmessage = (event) => {\r\n        //alert('onmessage')\r\n        const response = JSON.parse(event.data)\r\n\r\n        this.handleIncomingMessage(response)\r\n      }\r\n\r\n      this.ws.onerror = (error) => {\r\n        alert('WebSocket error:', error)\r\n        this.isConnected = false\r\n      }\r\n\r\n      this.ws.onclose = (event) => {\r\n        this.isConnected = false\r\n        if (!event.wasClean && this.reconnectAttempts < this.maxReconnectAttempts) {\r\n          this.handleReconnect()\r\n        }\r\n      }\r\n    },\r\n    confirmBeforeUnload(event) {\r\n     event.preventDefault()\r\n     // 赋值会触发标准确认框\r\n     event.returnValue = '确定要离开本页面吗？'\r\n   },\r\n    handleReconnect() {\r\n      const delay = Math.min(3000 * Math.pow(2, this.reconnectAttempts), 30000)\r\n      setTimeout(() => {\r\n        this.reconnectAttempts++\r\n        this.initializeWebSocket()\r\n      }, delay)\r\n    },\r\n\r\n    handleIncomingMessage(response) {\r\n      const newMessage = {\r\n        from: response.system ? 'system' : 'consultant',\r\n        text: response.msg,\r\n        time: dayjs(response.time).format('HH:mm:ss'),\r\n        status: 'received'\r\n      }\r\n\r\n      this.messages.push(newMessage)\r\n\r\n      if (newMessage.text === '会话已开始') {\r\n        this.sessionStarted = true\r\n      } else if (newMessage.text === '会话已结束') {\r\n        alert(\"咨询师已结束会话！\")\r\n        this.sessionEnded = true\r\n        // 自动显示评分弹窗\r\n        this.showRatingDialog = true\r\n      }\r\n    },\r\n\r\n    async addMessage(content) {\r\n      if (!this.ws || this.ws.readyState !== WebSocket.OPEN) {\r\n        alert('连接尚未建立，请稍后再试')\r\n        return\r\n      }\r\n\r\n      const userMessage = {\r\n        from: 'user',\r\n        text: content,\r\n        time: dayjs().format('HH:mm:ss'),\r\n        status: 'sending'\r\n      }\r\n      \r\n      try {\r\n        this.messages.push(userMessage)\r\n        const payload = JSON.stringify({ msg: content })\r\n        this.ws.send(payload)\r\n        \r\n        // 更新消息状态\r\n        const index = this.messages.length - 1\r\n        this.messages[index].status = 'sent'\r\n      } catch (error) {\r\n        //console.error('消息发送失败:', error)\r\n        const index = this.messages.findIndex(msg => msg.status === 'sending')\r\n        if (index !== -1) {\r\n          this.messages[index].status = 'failed'\r\n        }\r\n      }\r\n    },\r\n\r\n    cleanupWebSocket() {\r\n      if (this.ws) {\r\n        this.ws.onclose = null\r\n        this.ws.close()\r\n        this.ws = null\r\n      }\r\n    },\r\n\r\n    handleBeforeUnload() {\r\n      this.cleanupWebSocket()\r\n    },\r\n\r\n    async fetchHistory() {\r\n      try {\r\n        // 这里假设有获取历史记录的API\r\n        // const response = await axios.get(`/api/messages/${this.sessionId}`)\r\n        // this.messages = response.data.map(...)\r\n      } catch (error) {\r\n        //console.error('加载历史消息失败:', error)\r\n      }\r\n    },\r\n\r\n    handleTick(remaining) {\r\n      localStorage.setItem(`countdown_${this.sessionId}`, remaining)\r\n      this.remainingTime = remaining\r\n    },\r\n\r\n    handleTimeUp() {\r\n      localStorage.removeItem(`countdown_${this.sessionId}`)\r\n      alert('本次咨询时间已到，即将结束会话')\r\n      this.confirmEndSession()\r\n    },\r\n\r\n    handleShowRating() {\r\n      this.showConfirm = false\r\n      this.showRatingDialog = true\r\n    },\r\n\r\n    setRating(n) {\r\n      this.rating = n\r\n    },\r\n\r\n    \r\n    submitRating() {\r\n      const token = localStorage.getItem(\"token\");\r\n      const payload = {\r\n        sessionId: this.sessionId,\r\n        rate: this.rating || 0,\r\n        feedback: (this.feedback || \"\").trim()\r\n      };\r\n\r\n      if (this.rating > 0) {\r\n        this.$axios\r\n          .put(\r\n            `${window.location.origin}/api/user/session/evaluate`,\r\n            payload,\r\n            {\r\n              headers: {\r\n                'Content-Type': 'application/json',\r\n                token: token\r\n              }\r\n            }\r\n          )\r\n          .then((res) => {\r\n            const data = res.data;\r\n            if (data.code !== '1') {\r\n              this.$message.error(\"提交评分失败\");\r\n            } else {\r\n              this.$message.success(\"评分提交成功\");\r\n              this.showRatingDialog = false;\r\n              this.sessionEnded = true;\r\n\r\n              // ✅ 等评分成功后再关闭窗口\r\n              this.cleanupSession(true);\r\n            }\r\n          })\r\n          .catch(() => {\r\n            this.$message.error(\"提交评分失败，请稍后再试\");\r\n          });\r\n      } else {\r\n        // 若未评分也允许清理\r\n        this.cleanupSession(true);\r\n      }\r\n    },\r\n\r\n\r\n\r\n    cleanupSession() {\r\n      window.removeEventListener('beforeunload', this.confirmBeforeUnload)\r\n      localStorage.removeItem(`countdown_${this.sessionId}`)\r\n      this.cleanupWebSocket()\r\n      setTimeout(() => {\r\n        window.close()\r\n      }, 500)\r\n    },\r\n\r\n    confirmEndSession() {\r\n      this.cleanupSession()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  position: relative;\r\n  padding-bottom:30px;\r\n}\r\n\r\n.chat-header {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 60px;\r\n  background: #fff;\r\n  box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 20px;\r\n  z-index: 1000;\r\n}\r\n\r\n.header-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.connection-status {\r\n  font-size: 0.9rem;\r\n  color: #909399;\r\n}\r\n\r\n.connection-status.connected {\r\n  color: #67C23A;\r\n}\r\n\r\n.end-session-btn {\r\n  background: #409EFF;\r\n  color: #fff;\r\n  border: none;\r\n  padding: 8px 16px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: background 0.3s;\r\n}\r\n\r\n.end-session-btn:hover {\r\n  background: #66b1ff;\r\n}\r\n\r\n/* 在父组件中调整主聊天区域 */\r\n.main-chat {\r\n  flex: 1;\r\n  margin-top: 60px;\r\n  padding: 20px;\r\n  overflow-y: auto;\r\n  width: calc(100% - 40px); /* 添加宽度限制 */\r\n}\r\n.history-sidebar {\r\n  top: 60px;\r\n}\r\n\r\n.confirm-dialog {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0,0,0,0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 2000;\r\n}\r\n\r\n.dialog-content {\r\n  background: white;\r\n  padding: 24px;\r\n  border-radius: 8px;\r\n  min-width: 400px;\r\n  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.1);\r\n}\r\n\r\n.dialog-content h3 {\r\n  margin: 0 0 20px;\r\n  font-size: 18px;\r\n  color: #303133;\r\n}\r\n\r\n.star-rating {\r\n  margin: 20px 0;\r\n  font-size: 32px;\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 8px;\r\n}\r\n\r\n.star {\r\n  cursor: pointer;\r\n  color: #dcdfe6;\r\n  transition: color 0.2s;\r\n}\r\n\r\n.star.filled {\r\n  color: #f7ba2a;\r\n}\r\n\r\n.feedback-box {\r\n  width: 100%;\r\n  min-height: 100px;\r\n  margin: 15px 0;\r\n  padding: 10px;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px;\r\n  resize: vertical;\r\n  font-size: 14px;\r\n}\r\n\r\n.dialog-btns {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.dialog-btns button {\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.dialog-btns button:first-child {\r\n  background: #409EFF;\r\n  color: white;\r\n}\r\n\r\n.dialog-btns button:last-child {\r\n  background: #f4f4f5;\r\n  color: #606266;\r\n}\r\n</style>","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=687eba94&scoped=true\"\nimport script from \"./Chat.vue?vue&type=script&lang=js\"\nexport * from \"./Chat.vue?vue&type=script&lang=js\"\nimport style0 from \"./Chat.vue?vue&type=style&index=0&id=687eba94&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"687eba94\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chat-container\"},[_c('header',{staticClass:\"chat-header\"},[_c('div',{staticClass:\"header-left\"},[_c('div',{staticClass:\"connection-status\",class:{ connected: _vm.isConnected }},[_vm._v(\"\\n        ● \"+_vm._s(_vm.connectionStatusText)+\"\\n      \")]),_c('div',{staticClass:\"timer\"},[_vm._v(_vm._s(_vm.formattedRemainingTime))])]),_c('button',{staticClass:\"end-session-btn\",on:{\"click\":function($event){_vm.showConfirm = true}}},[_vm._v(\"\\n      结束会话\\n    \")])]),_c('ChatContainer',{ref:\"chatScroll\",staticClass:\"main-chat\",attrs:{\"messages\":_vm.messages}}),_c('ChatMessages',{on:{\"send-message\":_vm.addMessage}}),_c('history-sidebar',{staticClass:\"history-sidebar\",attrs:{\"history\":_vm.chatHistory},model:{value:(_vm.sidebarVisible),callback:function ($$v) {_vm.sidebarVisible=$$v},expression:\"sidebarVisible\"}}),(_vm.showConfirm)?_c('div',{staticClass:\"confirm-dialog\"},[_c('div',{staticClass:\"dialog-content\"},[_c('p',[_vm._v(\"是否确定要结束本次会话？\")]),_c('div',{staticClass:\"dialog-btns\"},[_c('button',{on:{\"click\":_vm.handleShowRating}},[_vm._v(\"确定\")]),_c('button',{on:{\"click\":function($event){_vm.showConfirm = false}}},[_vm._v(\"取消\")])])])]):_vm._e(),(_vm.showRatingDialog)?_c('div',{staticClass:\"confirm-dialog\"},[_c('div',{staticClass:\"dialog-content\"},[_c('h3',[_vm._v(\"请为本次会话打分\")]),_c('div',{staticClass:\"star-rating\"},_vm._l((5),function(n){return _c('span',{key:n,staticClass:\"star\",class:{ filled: n <= _vm.rating },on:{\"click\":function($event){_vm.setRating(n)}}},[_vm._v(\"★\")])})),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.feedback),expression:\"feedback\"}],staticClass:\"feedback-box\",attrs:{\"placeholder\":\"留下你的评价（可选）\"},domProps:{\"value\":(_vm.feedback)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.feedback=$event.target.value}}}),_c('div',{staticClass:\"dialog-btns\"},[_c('button',{on:{\"click\":_vm.submitRating}},[_vm._v(\"提交\")])])])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"chat-container\">\r\n    <!-- 顶部导航栏 -->\r\n    <header class=\"chat-header\">\r\n      <div class=\"header-left\">\r\n        <div class=\"connection-status\" :class=\"{ connected: isConnected }\">\r\n          ● {{ connectionStatusText }}\r\n        </div>\r\n        <div class=\"timer\">{{ formattedRemainingTime }}</div>\r\n      </div>\r\n      <button class=\"end-session-btn\" @click=\"showConfirm = true\">\r\n        结束会话\r\n      </button>\r\n    </header>\r\n\r\n    <!-- 主聊天区域 -->\r\n    <ChatContainer ref=\"chatScroll\"  :messages=\"messages\" class=\"main-chat\" />\r\n    <!-- 消息输入区 -->\r\n    <ChatMessages @send-message=\"addMessage\" />\r\n\r\n    <!-- 历史记录侧边栏 -->\r\n    <history-sidebar \r\n      v-model=\"sidebarVisible\"\r\n      :history=\"chatHistory\"\r\n      class=\"history-sidebar\"\r\n    />\r\n\r\n    <!-- 结束会话确认对话框 -->\r\n    <div v-if=\"showConfirm\" class=\"confirm-dialog\">\r\n      <div class=\"dialog-content\">\r\n        <p>是否确定要结束本次会话？</p>\r\n        <div class=\"dialog-btns\">\r\n          <button @click=\"handleShowRating\">确定</button>\r\n          <button @click=\"showConfirm = false\">取消</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 评分弹窗 -->\r\n    <div v-if=\"showRatingDialog\" class=\"confirm-dialog\">\r\n      <div class=\"dialog-content\">\r\n        <h3>请为本次会话打分</h3>\r\n        <div class=\"star-rating\">\r\n          <span \r\n            v-for=\"n in 5\" \r\n            :key=\"n\" \r\n            class=\"star\" \r\n            :class=\"{ filled: n <= rating }\" \r\n            @click=\"setRating(n)\"\r\n          >★</span>\r\n        </div>\r\n        <textarea \r\n          v-model=\"feedback\" \r\n          placeholder=\"留下你的评价（可选）\" \r\n          class=\"feedback-box\"\r\n        ></textarea>\r\n        <div class=\"dialog-btns\">\r\n          <button @click=\"submitRating\">提交</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport dayjs from 'dayjs'\r\nimport ChatContainer from '@/components/ChatContainer'\r\nimport ChatMessages from '@/components/ChatMessages'\r\nimport HistorySidebar from '@/components/HistorySidebar'\r\n\r\nexport default {\r\n  components: {\r\n    ChatContainer,\r\n    ChatMessages,\r\n    HistorySidebar\r\n  },\r\n  data() {\r\n    return {\r\n      sessionStarted: false,\r\n      sessionEnded: false,\r\n      messages: [],\r\n      chatHistory: [],\r\n      sidebarVisible: false,\r\n      showConfirm: false,\r\n      showRatingDialog: false,\r\n      rating: 0,\r\n      feedback: '',\r\n      //sessionId: parseInt(this.$route.params.sessionId),\r\n      remainingTime: 0,\r\n      ws: null,\r\n      reconnectAttempts: 0,\r\n      maxReconnectAttempts: 5,\r\n      isConnected: false\r\n    }\r\n  },\r\n  computed: {\r\n    wsUrl() {\r\n      const { host } = window.location;  // 包含域名和端口，若同端口部署则不需单独填写\r\n      const token = localStorage.getItem('token');\r\n      return `ws://${host}/chat?token=${token}&sessionId=${this.sessionId}&type=0`;\r\n    },\r\n    connectionStatusText() {\r\n      return this.isConnected ? '已连接' : '连接中...'\r\n    },\r\n    formattedRemainingTime() {\r\n      if (isNaN(this.remainingTime)) return '00:00'\r\n      \r\n      const absSeconds = Math.abs(this.remainingTime)\r\n      const minutes = Math.floor(absSeconds / 60)\r\n      const seconds = absSeconds % 60\r\n      \r\n      // 添加剩余时间状态指示\r\n      const prefix = this.remainingTime < 0 ? '-' : ''\r\n      \r\n      return `${prefix}${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`\r\n    }\r\n  },\r\n  watch: {\r\n    sessionId() {\r\n      this.initializeWebSocket()\r\n    },\r\n    messages() {\r\n    this.$nextTick(() => {\r\n      this.scrollToBottom()\r\n    })\r\n  }\r\n  },\r\n  created() {\r\n    //this.$message('路由参数:', this.$route.query) // 调试参数\r\n    this.sessionId = parseInt(this.$route.query.sessionId, 10)\r\n    this.calculateRemainingTime();\r\n    this.startCountdown();\r\n    this.initializeWebSocket()\r\n    window.addEventListener('beforeunload', this.handleBeforeUnload)\r\n    window.addEventListener('beforeunload', this.confirmBeforeUnload)\r\n    this.fetchHistory()\r\n  },\r\n  beforeDestroy() {\r\n    this.cleanupWebSocket()\r\n    window.removeEventListener('beforeunload', this.handleBeforeUnload)\r\n    window.removeEventListener('beforeunload', this.confirmBeforeUnload)\r\n  },\r\n  methods: {\r\n    scrollToBottom: function () {\r\n      // 兼容不支持可选链的写法\r\n      var chatScroll = this.$refs.chatScroll;\r\n      var container = chatScroll && chatScroll.$el ? chatScroll.$el : chatScroll;\r\n      if (container) {\r\n        // 如果 ChatContainer 最外层就是滚动元素\r\n        container.scrollTop = container.scrollHeight;\r\n      }\r\n    },\r\n    calculateRemainingTime() {\r\n     // 从路由参数获取日期和时间\r\n     const dateStr = this.$route.query.startDate;\r\n      const timeStr = this.$route.query.startTime;\r\n      \r\n      // 合并日期时间（格式：YYYY-MM-DD HH:mm）\r\n      const appointmentDateTime = dayjs(`${dateStr} ${timeStr}`);\r\n      \r\n      // 计算结束时间（预约时间+1小时）\r\n      const endTime = appointmentDateTime.add(1, 'hour');\r\n      \r\n      // 获取当前时间\r\n      const now = dayjs();\r\n      \r\n      // 计算剩余秒数（如果已超时则显示0）\r\n      this.remainingTime = Math.max(endTime.diff(now, 'second'), 0);\r\n    },\r\n    startCountdown() {\r\n      this.countdownInterval = setInterval(() => {\r\n        this.calculateRemainingTime();\r\n        if (this.remainingTime <= 10) {\r\n          clearInterval(this.countdownInterval);\r\n          this.handleTimeUp();\r\n        } else {\r\n          this.remainingTime--;\r\n        }\r\n      }, 1000);\r\n    },\r\n    \r\n    async initializeWebSocket() {\r\n      this.cleanupWebSocket()\r\n      \r\n      try {\r\n        this.ws = new WebSocket(this.wsUrl)\r\n        this.setupWebSocketHandlers()\r\n      } catch (error) {\r\n        //console.error('WebSocket连接失败:', error)\r\n        this.handleReconnect()\r\n      }\r\n    },\r\n\r\n    setupWebSocketHandlers() {\r\n      this.ws.onopen = () => {\r\n        //alert('WebSocket connected')\r\n        this.isConnected = true\r\n        this.reconnectAttempts = 0\r\n      }\r\n\r\n      this.ws.onmessage = (event) => {\r\n        //alert('onmessage')\r\n        const response = JSON.parse(event.data)\r\n\r\n        this.handleIncomingMessage(response)\r\n      }\r\n\r\n      this.ws.onerror = (error) => {\r\n        alert('WebSocket error:', error)\r\n        this.isConnected = false\r\n      }\r\n\r\n      this.ws.onclose = (event) => {\r\n        this.isConnected = false\r\n        if (!event.wasClean && this.reconnectAttempts < this.maxReconnectAttempts) {\r\n          this.handleReconnect()\r\n        }\r\n      }\r\n    },\r\n    confirmBeforeUnload(event) {\r\n     event.preventDefault()\r\n     // 赋值会触发标准确认框\r\n     event.returnValue = '确定要离开本页面吗？'\r\n   },\r\n    handleReconnect() {\r\n      const delay = Math.min(3000 * Math.pow(2, this.reconnectAttempts), 30000)\r\n      setTimeout(() => {\r\n        this.reconnectAttempts++\r\n        this.initializeWebSocket()\r\n      }, delay)\r\n    },\r\n\r\n    handleIncomingMessage(response) {\r\n      const newMessage = {\r\n        from: response.system ? 'system' : 'consultant',\r\n        text: response.msg,\r\n        time: dayjs(response.time).format('HH:mm:ss'),\r\n        status: 'received'\r\n      }\r\n\r\n      this.messages.push(newMessage)\r\n\r\n      if (newMessage.text === '会话已开始') {\r\n        this.sessionStarted = true\r\n      } else if (newMessage.text === '会话已结束') {\r\n        alert(\"咨询师已结束会话！\")\r\n        this.sessionEnded = true\r\n        // 自动显示评分弹窗\r\n        this.showRatingDialog = true\r\n      }\r\n    },\r\n\r\n    async addMessage(content) {\r\n      if (!this.ws || this.ws.readyState !== WebSocket.OPEN) {\r\n        alert('连接尚未建立，请稍后再试')\r\n        return\r\n      }\r\n\r\n      const userMessage = {\r\n        from: 'user',\r\n        text: content,\r\n        time: dayjs().format('HH:mm:ss'),\r\n        status: 'sending'\r\n      }\r\n      \r\n      try {\r\n        this.messages.push(userMessage)\r\n        const payload = JSON.stringify({ msg: content })\r\n        this.ws.send(payload)\r\n        \r\n        // 更新消息状态\r\n        const index = this.messages.length - 1\r\n        this.messages[index].status = 'sent'\r\n      } catch (error) {\r\n        //console.error('消息发送失败:', error)\r\n        const index = this.messages.findIndex(msg => msg.status === 'sending')\r\n        if (index !== -1) {\r\n          this.messages[index].status = 'failed'\r\n        }\r\n      }\r\n    },\r\n\r\n    cleanupWebSocket() {\r\n      if (this.ws) {\r\n        this.ws.onclose = null\r\n        this.ws.close()\r\n        this.ws = null\r\n      }\r\n    },\r\n\r\n    handleBeforeUnload() {\r\n      this.cleanupWebSocket()\r\n    },\r\n\r\n    async fetchHistory() {\r\n      try {\r\n        // 这里假设有获取历史记录的API\r\n        // const response = await axios.get(`/api/messages/${this.sessionId}`)\r\n        // this.messages = response.data.map(...)\r\n      } catch (error) {\r\n        //console.error('加载历史消息失败:', error)\r\n      }\r\n    },\r\n\r\n    handleTick(remaining) {\r\n      localStorage.setItem(`countdown_${this.sessionId}`, remaining)\r\n      this.remainingTime = remaining\r\n    },\r\n\r\n    handleTimeUp() {\r\n      //localStorage.removeItem(`countdown_${this.sessionId}`)\r\n      alert('本次咨询时间已到，即将结束会话')\r\n      this.confirmEndSession()\r\n    },\r\n\r\n    handleShowRating() {\r\n      this.showConfirm = false\r\n      this.showRatingDialog = true\r\n    },\r\n\r\n    setRating(n) {\r\n      this.rating = n\r\n    },\r\n\r\n    \r\n    submitRating() {\r\n      const token = localStorage.getItem(\"token\");\r\n      const payload = {\r\n        sessionId: this.sessionId,\r\n        rate: this.rating || 0,\r\n        feedback: (this.feedback || \"\").trim()\r\n      };\r\n\r\n      if (this.rating > 0) {\r\n        this.$axios\r\n          .put(\r\n            `${window.location.origin}/api/user/session/evaluate`,\r\n            payload,\r\n            {\r\n              headers: {\r\n                'Content-Type': 'application/json',\r\n                token: token\r\n              }\r\n            }\r\n          )\r\n          .then((res) => {\r\n            const data = res.data;\r\n            if (data.code !== '1') {\r\n              this.$message.error(\"提交评分失败\");\r\n            } else {\r\n              this.$message.success(\"评分提交成功\");\r\n              this.showRatingDialog = false;\r\n              this.sessionEnded = true;\r\n\r\n              // ✅ 等评分成功后再关闭窗口\r\n              this.cleanupSession(true);\r\n            }\r\n          })\r\n          .catch(() => {\r\n            this.$message.error(\"提交评分失败，请稍后再试\");\r\n          });\r\n      } else {\r\n        // 若未评分也允许清理\r\n        this.cleanupSession(true);\r\n      }\r\n    },\r\n\r\n\r\n    cleanupSession() {\r\n      window.removeEventListener('beforeunload', this.confirmBeforeUnload)\r\n      localStorage.removeItem(`countdown_${this.sessionId}`)\r\n      this.cleanupWebSocket()\r\n      setTimeout(() => {\r\n        window.close()\r\n      }, 500)\r\n    },\r\n\r\n    confirmEndSession() {\r\n      this.cleanupSession()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  position: relative;\r\n  padding-bottom:30px;\r\n}\r\n\r\n.chat-header {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 60px;\r\n  background: #fff;\r\n  box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 20px;\r\n  z-index: 1000;\r\n}\r\n\r\n.header-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.connection-status {\r\n  font-size: 0.9rem;\r\n  color: #909399;\r\n}\r\n\r\n.connection-status.connected {\r\n  color: #67C23A;\r\n}\r\n\r\n.end-session-btn {\r\n  background: #409EFF;\r\n  color: #fff;\r\n  border: none;\r\n  padding: 8px 16px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: background 0.3s;\r\n}\r\n\r\n.end-session-btn:hover {\r\n  background: #66b1ff;\r\n}\r\n\r\n/* 在父组件中调整主聊天区域 */\r\n.main-chat {\r\n  flex: 1;\r\n  margin-top: 60px;\r\n  padding: 20px;\r\n  overflow-y: auto;\r\n  width: calc(100% - 40px); /* 添加宽度限制 */\r\n}\r\n.history-sidebar {\r\n  top: 60px;\r\n}\r\n\r\n.confirm-dialog {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0,0,0,0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 2000;\r\n}\r\n\r\n.dialog-content {\r\n  background: white;\r\n  padding: 24px;\r\n  border-radius: 8px;\r\n  min-width: 400px;\r\n  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.1);\r\n}\r\n\r\n.dialog-content h3 {\r\n  margin: 0 0 20px;\r\n  font-size: 18px;\r\n  color: #303133;\r\n}\r\n\r\n.star-rating {\r\n  margin: 20px 0;\r\n  font-size: 32px;\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 8px;\r\n}\r\n\r\n.star {\r\n  cursor: pointer;\r\n  color: #dcdfe6;\r\n  transition: color 0.2s;\r\n}\r\n\r\n.star.filled {\r\n  color: #f7ba2a;\r\n}\r\n\r\n.feedback-box {\r\n  width: 100%;\r\n  min-height: 100px;\r\n  margin: 15px 0;\r\n  padding: 10px;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px;\r\n  resize: vertical;\r\n  font-size: 14px;\r\n}\r\n\r\n.dialog-btns {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.dialog-btns button {\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.dialog-btns button:first-child {\r\n  background: #409EFF;\r\n  color: white;\r\n}\r\n\r\n.dialog-btns button:last-child {\r\n  background: #f4f4f5;\r\n  color: #606266;\r\n}\r\n</style>","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Chatnormal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Chatnormal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Chatnormal.vue?vue&type=template&id=6f3dd444&scoped=true\"\nimport script from \"./Chatnormal.vue?vue&type=script&lang=js\"\nexport * from \"./Chatnormal.vue?vue&type=script&lang=js\"\nimport style0 from \"./Chatnormal.vue?vue&type=style&index=0&id=6f3dd444&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f3dd444\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"settings-container\"},[_c('h2',[_vm._v(\"账户设置\")]),_vm._l((_vm.fields),function(field){return _c('div',{key:field.key,staticClass:\"field-row\"},[_c('label',{attrs:{\"for\":field.key}},[_vm._v(_vm._s(field.label))]),((field.type)==='checkbox')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user[field.key]),expression:\"user[field.key]\"}],class:[{ editable: _vm.editMode[field.key] }, 'field-input'],attrs:{\"id\":field.key,\"readonly\":!_vm.editMode[field.key],\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.user[field.key])?_vm._i(_vm.user[field.key],null)>-1:(_vm.user[field.key])},on:{\"change\":function($event){var $$a=_vm.user[field.key],$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.user, field.key, $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.user, field.key, $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.user, field.key, $$c)}}}}):((field.type)==='radio')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user[field.key]),expression:\"user[field.key]\"}],class:[{ editable: _vm.editMode[field.key] }, 'field-input'],attrs:{\"id\":field.key,\"readonly\":!_vm.editMode[field.key],\"type\":\"radio\"},domProps:{\"checked\":_vm._q(_vm.user[field.key],null)},on:{\"change\":function($event){_vm.$set(_vm.user, field.key, null)}}}):_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user[field.key]),expression:\"user[field.key]\"}],class:[{ editable: _vm.editMode[field.key] }, 'field-input'],attrs:{\"id\":field.key,\"readonly\":!_vm.editMode[field.key],\"type\":field.type},domProps:{\"value\":(_vm.user[field.key])},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, field.key, $event.target.value)}}}),_c('button',{on:{\"click\":function($event){_vm.toggleEdit(field.key)}}},[_vm._v(\"\\n      \"+_vm._s(_vm.editMode[field.key] ? '保存' : '编辑')+\"\\n    \")])])}),_c('div',{staticClass:\"field-row\"},[_c('label',{attrs:{\"for\":\"password\"}},[_vm._v(\"密码\")]),_c('div',{staticClass:\"password-section\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],class:[{ editable: _vm.editMode.password }, 'field-input'],attrs:{\"id\":\"password\",\"type\":\"password\",\"readonly\":!_vm.editMode.password,\"placeholder\":\"******\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_c('button',{on:{\"click\":function($event){_vm.toggleEdit('password')}}},[_vm._v(\"\\n        \"+_vm._s(_vm.editMode.password ? '保存' : '编辑')+\"\\n      \")])])])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"settings-container\">\r\n      <h2>账户设置</h2>\r\n      <div v-for=\"field in fields\" :key=\"field.key\" class=\"field-row\">\r\n        <label :for=\"field.key\">{{ field.label }}</label>\r\n        <input\r\n          :id=\"field.key\"\r\n          :type=\"field.type\"\r\n          v-model=\"user[field.key]\"\r\n          :readonly=\"!editMode[field.key]\"\r\n          :class=\"[{ editable: editMode[field.key] }, 'field-input']\"\r\n        />\r\n        <button @click=\"toggleEdit(field.key)\">\r\n          {{ editMode[field.key] ? '保存' : '编辑' }}\r\n        </button>\r\n      </div>\r\n      <!-- 密码修改单独处理 -->\r\n      <div class=\"field-row\">\r\n        <label for=\"password\">密码</label>\r\n        <div class=\"password-section\">\r\n          <input\r\n            id=\"password\"\r\n            type=\"password\"\r\n            v-model=\"password\"\r\n            :readonly=\"!editMode.password\"\r\n            :class=\"[{ editable: editMode.password }, 'field-input']\"\r\n            placeholder=\"******\"\r\n          />\r\n          <button @click=\"toggleEdit('password')\">\r\n            {{ editMode.password ? '保存' : '编辑' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        user: {\r\n          phone: '15355464223',\r\n          email: '2803023760@qq.com',\r\n          username: localStorage.getItem('username') || '用户',\r\n        },\r\n        password: '',\r\n        editMode: {\r\n          phone: false,\r\n          email: false,\r\n          username: false,\r\n          password: false,\r\n        },\r\n        fields: [\r\n          { key: 'phone', label: '手机号', type: 'tel' },\r\n          { key: 'email', label: '邮箱', type: 'email' },\r\n          { key: 'username', label: '用户名', type: 'text' },\r\n        ],\r\n      };\r\n    },\r\n    methods: {\r\n      toggleEdit(key) {\r\n        if (this.editMode[key]) {\r\n          // 保存逻辑：例如调用 API 更新\r\n          this.saveField(key);\r\n        }\r\n        this.$set(this.editMode, key, !this.editMode[key]);\r\n      },\r\n      saveField(key) {\r\n        // TODO: 将 user[key] 或 password 发送到后端\r\n        this.$message(`保存字段 ${key}成功`);\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .settings-container {\r\n    width: 100%;\r\n    max-width: 500px;\r\n    margin: 0 auto;\r\n    padding: 20px;\r\n    background-color: white;\r\n    border: 1px solid #7a3b10;\r\n    border-radius: 20px;\r\n    box-sizing: border-box;\r\n  }\r\n  .settings-container h2 {\r\n    text-align: center;\r\n    margin-bottom: 20px;\r\n    color: #8b4513;\r\n  }\r\n  .field-row {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 15px;\r\n  }\r\n  .field-row label {\r\n    width: 80px;\r\n    color: #5c3317;\r\n  }\r\n  .field-input {\r\n    flex: 1;\r\n    padding: 8px;\r\n    border: 1px solid #ccc;\r\n    border-radius: 4px;\r\n    background-color: #f2f1e4;\r\n    color: #333;\r\n  }\r\n  .field-input.editable {\r\n    background-color: white;\r\n  }\r\n  .field-row button {\r\n    margin-left: 10px;\r\n    padding: 5px 12px;\r\n    background-color: #8b4513;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n  }\r\n  .password-section {\r\n    display: flex;\r\n    flex: 1;\r\n  }\r\n  </style>\r\n  ","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./settings.vue?vue&type=template&id=4c350582&scoped=true\"\nimport script from \"./settings.vue?vue&type=script&lang=js\"\nexport * from \"./settings.vue?vue&type=script&lang=js\"\nimport style0 from \"./settings.vue?vue&type=style&index=0&id=4c350582&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c350582\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messages-container\"},[_c('el-dialog',{attrs:{\"visible\":_vm.deleteConfirmVisible,\"title\":\"确认删除\",\"width\":\"30%\",\"show-close\":false},on:{\"update:visible\":function($event){_vm.deleteConfirmVisible=$event}}},[_c('span',[_vm._v(\"确定要删除所有已读消息吗？此操作不可撤销！\")]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.deleteConfirmVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.confirmDeleteRead}},[_vm._v(\"确 定\")])],1)]),_c('div',{staticClass:\"actions\"},[_c('el-button',{staticClass:\"custom-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.markAllAsRead}},[_vm._v(\"全部标记为已读\")]),_c('el-button',{staticClass:\"custom-btn\",attrs:{\"type\":\"danger\"},on:{\"click\":_vm.deleteReadMessages}},[_vm._v(\"删除所有已读消息\")])],1),(_vm.messages.length === 0)?_c('div',{staticClass:\"no-messages\"},[_vm._v(\"暂无消息\")]):_vm._e(),_c('div',{staticClass:\"message-card-container\"},_vm._l((_vm.sortedMessages),function(msg){return _c('div',{key:msg.notfId,staticClass:\"message-card\",on:{\"click\":function($event){_vm.handleRead(msg)}}},[_c('div',{staticClass:\"message-left\"},[_c('p',{staticClass:\"message-content\",domProps:{\"innerHTML\":_vm._s(_vm.formatContent(msg.content))}}),_c('p',{staticClass:\"message-time\"},[_vm._v(_vm._s(_vm.formatTime(msg.createTime)))])]),_c('div',{staticClass:\"message-right\"},[(msg.status === 'New')?_c('el-tag',{attrs:{\"type\":\"danger\"}},[_vm._v(\"未读\")]):_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\"已读\")])],1)])}))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"messages-container\">\r\n      <el-dialog\r\n        :visible.sync=\"deleteConfirmVisible\"\r\n        title=\"确认删除\"\r\n        width=\"30%\"\r\n        :show-close=\"false\"\r\n      >\r\n        <span>确定要删除所有已读消息吗？此操作不可撤销！</span>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"deleteConfirmVisible = false\">取 消</el-button>\r\n          <el-button type=\"danger\" @click=\"confirmDeleteRead\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n      <!-- 操作按钮 -->\r\n      <div class=\"actions\">\r\n        <el-button type=\"primary\" @click=\"markAllAsRead\" class=\"custom-btn\">全部标记为已读</el-button>\r\n        <el-button type=\"danger\" @click=\"deleteReadMessages\" class=\"custom-btn\">删除所有已读消息</el-button>\r\n      </div>\r\n  \r\n      <!-- 无消息提示 -->\r\n      <div v-if=\"messages.length === 0\" class=\"no-messages\">暂无消息</div>\r\n  \r\n      <!-- 消息卡片列表 -->\r\n      <div class=\"message-card-container\">\r\n        <div class=\"message-card\" v-for=\"msg in sortedMessages\" :key=\"msg.notfId\" @click=\"handleRead(msg)\">\r\n          <div class=\"message-left\">\r\n            <p class=\"message-content\" v-html=\"formatContent(msg.content)\"></p>\r\n            <p class=\"message-time\">{{ formatTime(msg.createTime) }}</p>\r\n          </div>\r\n          <div class=\"message-right\">\r\n            <el-tag v-if=\"msg.status === 'New'\" type=\"danger\">未读</el-tag>\r\n            <el-tag v-else type=\"success\">已读</el-tag>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from \"axios\";\r\n  \r\n  export default {\r\n    data() {\r\n      return {\r\n        token: localStorage.getItem(\"token\"),\r\n        messages: [],\r\n        deleteConfirmVisible: false,  \r\n        unread:0,\r\n      };\r\n    },\r\n    computed: {\r\n      sortedMessages() {\r\n        return this.messages\r\n          .filter((msg) => msg.status !== \"Deleted\")\r\n          .sort((a, b) => {\r\n            if (a.status !== b.status) {\r\n              return a.status === \"New\" ? -1 : 1; // 未读优先\r\n            }\r\n            return new Date(b.createTime) - new Date(a.createTime); // 时间倒序\r\n          });\r\n      },\r\n    },\r\n    mounted() {\r\n      this.fetchMessages();\r\n      //this.count();\r\n    },\r\n    methods: {\r\n        count(){\r\n          this.$axios\r\n          .get(\"/user/notification\", {\r\n            headers: { token: this.token },\r\n            params:{userId:localStorage.getItem('userId')},\r\n          })\r\n          .then((res) => {\r\n            if (res.data.code === \"1\") {\r\n              this.unread = res.data.data;\r\n            }\r\n          });\r\n        },\r\n      // 修改删除方法\r\n      deleteReadMessages() {\r\n        const readCount = this.messages.filter(m => m.status === \"Read\").length;\r\n        if (readCount === 0) {\r\n          this.$message.warning(\"当前没有可删除的已读消息\");\r\n          return;\r\n        }\r\n        this.deleteConfirmVisible = true;\r\n      },\r\n  \r\n      // 新增确认删除方法\r\n      confirmDeleteRead() {\r\n        const readMsgs = this.messages.filter((m) => m.status === \"Read\");\r\n        const requests = readMsgs.map((msg) =>\r\n          this.$axios.delete(\"/user/notification\", {\r\n            params: { notfId: msg.notfId },\r\n            headers: { token: this.token },\r\n          })\r\n        );\r\n  \r\n        Promise.all(requests)\r\n          .then(() => {\r\n            this.messages = this.messages.filter((m) => m.status !== \"Read\");\r\n            this.$message.success(`成功删除${readMsgs.length}条消息`);\r\n          })\r\n          .catch(() => {\r\n            this.$message.error(\"删除操作失败\");\r\n          })\r\n          .finally(() => {\r\n            this.deleteConfirmVisible = false;\r\n          });\r\n      },\r\n      fetchMessages() {\r\n        this.$axios\r\n          .get(\"/user/notification/list\", {\r\n            headers: { token: this.token },\r\n            params:{userId:localStorage.getItem('userId')},\r\n          })\r\n          .then((res) => {\r\n            if (res.data.code === \"1\") {\r\n              this.messages = res.data.data;\r\n            }\r\n          });\r\n      },\r\n      formatTime(datetime) {\r\n        const date = new Date(datetime);\r\n        const y = date.getFullYear();\r\n        const m = date.getMonth() + 1;\r\n        const d = date.getDate();\r\n        const h = date.getHours().toString().padStart(2, \"0\");\r\n        const min = date.getMinutes().toString().padStart(2, \"0\");\r\n        return `${y}-${m}-${d} ${h}:${min}`;\r\n      },\r\n      formatContent(content) {\r\n        if (!content) return '';\r\n        return content\r\n          .split(\",\")\r\n          .map((str) => str.trim())\r\n          .join(\"<br>\");\r\n      },\r\n      handleRead(msg) {\r\n        if (msg.status === \"New\") {\r\n          this.$axios\r\n            .put(\r\n              \"/user/notification\",\r\n              {},\r\n              {\r\n                params: { notfId: msg.notfId },\r\n                headers: { token: this.token },\r\n              }\r\n            )\r\n            .then((res) => {\r\n              if (res.data.code === \"1\") {\r\n                this.$set(msg, 'status', 'Read'); // 使用 $set 来保证响应式\r\n                this.messages = [...this.messages]; // 通过重新赋值来触发渲染\r\n              }\r\n            });\r\n        }\r\n      },\r\n  \r\n  \r\n      markAllAsRead() {\r\n        const unread = this.messages.filter((m) => m.status === \"New\");\r\n        const requests = unread.map((msg) =>\r\n          this.$axios.put(\r\n            \"/user/notification\",\r\n            {},\r\n            {\r\n              params: { notfId: msg.notfId },\r\n              headers: { token: this.token },\r\n            }\r\n          )\r\n        );\r\n  \r\n        Promise.all(requests).then(() => {\r\n          this.messages.forEach((msg) => {\r\n            if (msg.status === \"New\") msg.status = \"Read\";\r\n          });\r\n        });\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .messages-container {\r\n    padding: 20px;\r\n    height: calc(100vh - 40px); /* 确保容器不被遮挡，减去padding */\r\n    overflow-y: auto;\r\n    box-sizing: border-box;\r\n    background-color: white;\r\n    text-align: left;\r\n    width: 100%;\r\n    bottom: 20px;\r\n  }\r\n  \r\n  .message-card-container {\r\n    display: grid;\r\n    grid-template-columns: repeat(2, 1fr); /* 一行显示两个卡片 */\r\n    gap: 24px; /* 可稍微增大间距 */\r\n    grid-auto-rows: minmax(150px, auto);\r\n    overflow-y: auto;\r\n    height: calc(100vh - 140px); /* 除去头部和底部的部分，确保底部有足够空间 */\r\n    padding-bottom: 20px; /* 给底部加一些空间，避免遮挡 */\r\n  }\r\n  \r\n  .actions {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    margin-bottom: 20px;\r\n    gap: 12px;\r\n  }\r\n  \r\n  .custom-btn {\r\n    background-color: #ffe4b5;\r\n    color: #8b4513;\r\n    border: 1px solid #ffe4b5;\r\n  }\r\n  .message-card {\r\n    display: flex;\r\n    flex-direction: column; /* 改为纵向布局 */\r\n    justify-content: space-between; /* 内容上下分布 */\r\n    align-items: flex-start;\r\n    background-color: white;\r\n    border: 1px solid #FFE4B5;\r\n    border-radius: 12px;\r\n    padding: 16px;\r\n    transition: background-color 0.2s ease-in-out;\r\n    cursor: pointer;\r\n    height: 170px; /* 设置固定高度 */\r\n    overflow: hidden; /* 隐藏溢出的内容 */\r\n  }\r\n  \r\n  .message-left {\r\n    flex: 1;\r\n    margin-right: 12px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between; /* 上下均匀分布内容 */\r\n  }\r\n  \r\n  .message-content {\r\n    font-size: 16px;\r\n    color: #333;\r\n    margin-bottom: 6px;\r\n    white-space: pre-wrap;\r\n    line-height: 1.5;\r\n    overflow-y: auto; /* 允许内容溢出时滚动 */\r\n    max-height: 100px; /* 限制消息内容的最大高度 */\r\n  }\r\n  \r\n  .message-time {\r\n    font-size: 14px;\r\n    color: #999;\r\n    margin-top: auto;\r\n  }\r\n  \r\n  .message-right {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    padding-top: 12px; /* 调整间距，使未读标识和时间更接近 */\r\n  }\r\n  \r\n  .no-messages {\r\n    text-align: center;\r\n    font-size: 20px;\r\n    color: #999;\r\n    margin-top: 100px;\r\n  }\r\n  \r\n  .message-card:hover {\r\n    background-color: #f4e7d3;\r\n  }\r\n  \r\n  \r\n  \r\n  .no-messages {\r\n    text-align: center;\r\n    font-size: 20px;\r\n    color: #999;\r\n    margin-top: 100px;\r\n  }\r\n  .dialog-footer {\r\n    text-align: right;\r\n  }\r\n  \r\n  \r\n  .el-button--primary:hover,\r\n  .el-button--danger:hover {\r\n    background-color: #ffd699;\r\n  }\r\n  /* 修改后样式 */\r\n  \r\n  </style>\r\n  ","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./messages.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./messages.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./messages.vue?vue&type=template&id=622042e6&scoped=true\"\nimport script from \"./messages.vue?vue&type=script&lang=js\"\nexport * from \"./messages.vue?vue&type=script&lang=js\"\nimport style0 from \"./messages.vue?vue&type=style&index=0&id=622042e6&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"622042e6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"appointment-records\"},[_c('el-form',{staticClass:\"filter-form\",attrs:{\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"预约时间\"}},[_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.filterDate),callback:function ($$v) {_vm.filterDate=$$v},expression:\"filterDate\"}})],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"background-color\":\"#FFE4B5\",\"color\":\"#8B4513\"},on:{\"click\":_vm.fetchAppointments}},[_vm._v(\"\\n        筛选\\n      \")])],1),_c('div',{staticStyle:{\"color\":\"#333\"}},[_vm._v(\"点击可取消预约\")])],1),_c('div',{staticClass:\"appointment-card-container\"},_vm._l((_vm.sortedAppointments),function(record){return _c('div',{key:record.appointmentId,staticClass:\"appointment-card\",on:{\"click\":function($event){_vm.handleCancel(record.appointmentId)}}},[_c('p',[_c('strong',[_vm._v(\"咨询师：\")]),_vm._v(_vm._s(record.consultantName))]),_c('p',[_c('strong',[_vm._v(\"预约时间：\")]),_vm._v(_vm._s(record.appointmentDate)+\" \"+_vm._s(record.appointmentTime))])])})),_c('el-dialog',{staticClass:\"custom-cancel-dialog\",attrs:{\"title\":\"取消预约\",\"visible\":_vm.showCancelModal,\"width\":\"400px\",\"border-radius\":\"20px\"},on:{\"update:visible\":function($event){_vm.showCancelModal=$event}}},[_c('div',[_c('p',[_vm._v(\"确定要取消该预约吗？\")]),_c('el-input',{staticStyle:{\"margin-top\":\"15px\"},attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入取消理由\",\"rows\":4},model:{value:(_vm.leaveReason),callback:function ($$v) {_vm.leaveReason=$$v},expression:\"leaveReason\"}})],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showCancelModal = false}}},[_vm._v(\"取 消\")]),_c('el-button',{staticClass:\"el-button--confirm\",on:{\"click\":_vm.submitCancel}},[_vm._v(\"\\n      确 定\\n    \")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"appointment-records\">\r\n    <!-- 筛选条件 -->\r\n    <el-form :inline=\"true\" class=\"filter-form\">\r\n      <el-form-item label=\"预约时间\">\r\n        <el-date-picker\r\n          v-model=\"filterDate\"\r\n          type=\"daterange\"\r\n          range-separator=\"至\"\r\n          start-placeholder=\"开始日期\"\r\n          end-placeholder=\"结束日期\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button style=\"background-color: #FFE4B5; color: #8B4513;\" @click=\"fetchAppointments\">\r\n          筛选\r\n        </el-button>\r\n        \r\n      </el-form-item>\r\n      <div style=\"color:#333\">点击可取消预约</div>\r\n    </el-form>\r\n\r\n    <!-- 预约记录列表 -->\r\n    <div class=\"appointment-card-container\">\r\n      <div \r\n        class=\"appointment-card\" \r\n        v-for=\"record in sortedAppointments\" \r\n        :key=\"record.appointmentId\"\r\n        @click=\"handleCancel(record.appointmentId)\"\r\n      >\r\n        <p><strong>咨询师：</strong>{{ record.consultantName }}</p>\r\n        <p><strong>预约时间：</strong>{{ record.appointmentDate }} {{ record.appointmentTime }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 取消预约弹窗 -->\r\n    <el-dialog\r\n    title=\"取消预约\"\r\n    :visible.sync=\"showCancelModal\"\r\n    width=\"400px\"\r\n    border-radius=\"20px\"\r\n    class=\"custom-cancel-dialog\"\r\n  >\r\n    <div>\r\n      <p>确定要取消该预约吗？</p>\r\n      <el-input\r\n        type=\"textarea\"\r\n        v-model=\"leaveReason\"\r\n        placeholder=\"请输入取消理由\"\r\n        :rows=\"4\"\r\n        style=\"margin-top: 15px;\"\r\n      />\r\n    </div>\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"showCancelModal = false\">取 消</el-button>\r\n      <el-button\r\n        class=\"el-button--confirm\"\r\n        @click=\"submitCancel\"\r\n      >\r\n        确 定\r\n      </el-button>\r\n    </span>\r\n  </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      userId: localStorage.getItem(\"userId\"), \r\n      token: localStorage.getItem(\"token\"),\r\n      appointments: [],\r\n      filterDate: null,\r\n      showCancelModal: false,\r\n      currentAppointmentId: null,\r\n      leaveReason: \"\"\r\n    };\r\n  },\r\n  computed: {\r\n    sortedAppointments() {\r\n      return [...this.appointments].sort((a, b) => {\r\n        const aTime = new Date(`${a.appointmentDate}T${a.appointmentTime}`);\r\n        const bTime = new Date(`${b.appointmentDate}T${b.appointmentTime}`);\r\n        return bTime - aTime;\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    handleCancel(appointmentId) {\r\n      this.currentAppointmentId = appointmentId;\r\n      this.showCancelModal = true;\r\n      this.leaveReason = \"\";\r\n    },\r\n\r\n    async submitCancel() {\r\n      if (!this.leaveReason.trim()) {\r\n        this.$message.warning(\"请输入取消理由\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const res = await axios.post(\"/user/cancel\", {\r\n          appointmentId: this.currentAppointmentId,\r\n          cancellationReason: this.leaveReason\r\n        }, {\r\n          headers: { token: this.token }\r\n        });\r\n\r\n        if (res.data.code === '1') {\r\n          this.$message(\"取消预约成功\");\r\n          this.showCancelModal = false;\r\n          await this.fetchAppointments();\r\n        } else {\r\n          this.$message.error(res.data.msg);\r\n        }\r\n      } catch (err) {\r\n        this.$message.error(\"取消预约失败：\" + err.message);\r\n      }\r\n    },\r\n    async fetchAppointments() {\r\n      try {\r\n        const params = {\r\n          userId: this.userId,\r\n          appointmentStatus: \"BOOKED\"\r\n        };\r\n\r\n        if (this.filterDate && this.filterDate.length === 2) {\r\n          params.startDate = this.formatDate(this.filterDate[0]);\r\n          params.endDate = this.formatDate(this.filterDate[1]);\r\n        }\r\n\r\n        const res = await this.$axios.get(\"/user/appointments\", {\r\n          headers: {\r\n            token: localStorage.getItem(\"token\") || \"\"\r\n          },\r\n          params\r\n        });\r\n\r\n        if (res.data.code === 1 || res.data.code === \"1\") {\r\n          this.appointments = (res.data.data || []).map(item => {\r\n            return {\r\n              appointmentId: item.appointmentId,\r\n              userId: item.userId,\r\n              consultantName: item.consultantName || \"未知用户\",\r\n              consultantId: item.consultantId,\r\n              appointmentDate: item.appointmentDate,\r\n              appointmentTime: item.appointmentTime,\r\n              bookingDate: item.bookingDate,\r\n              status: item.status,\r\n              cancellationTime: item.cancellationTime,\r\n              cancellationReason: item.cancellationReason || \"无理由\"\r\n            };\r\n          });\r\n          if(res.data.data.length === 0) {\r\n            console.log(\"没有预约记录\");\r\n          }\r\n        }else if (res.data.code === \"2\") {\r\n          this.appointments = [];\r\n          console.log(\"没有预约记录\");\r\n        } \r\n        else {\r\n          console.log(\"获取预约记录失败：\" + res.data.msg);\r\n        }\r\n      } catch (err) {\r\n        this.$message.error(\"请求失败：\" + err);\r\n      }\r\n    },\r\n\r\n    formatDate(date) {\r\n      const d = new Date(date);\r\n      const year = d.getFullYear();\r\n      const month = (`0${d.getMonth() + 1}`).slice(-2);\r\n      const day = (`0${d.getDate()}`).slice(-2);\r\n      return `${year}-${month}-${day}`;\r\n    }\r\n  },\r\n  created() {\r\n    axios.defaults.headers.common[\"token\"] = localStorage.getItem(\"token\") || \"\";\r\n  },\r\n  mounted() {\r\n    this.fetchAppointments();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.appointment-records {\r\n  padding: 20px;\r\n  overflow-y: auto;\r\n}\r\n/* 取消预约对话框自定义 */\r\n.custom-cancel-dialog .el-dialog__header,\r\n.custom-cancel-dialog .el-dialog__body,\r\n.custom-cancel-dialog .el-dialog__footer {\r\n  border-radius: 20px;\r\n}\r\n.custom-cancel-dialog .el-dialog__headerbtn {\r\n  display: none;\r\n}\r\n\r\n/* 底部按钮圆角 */\r\n.custom-cancel-dialog .dialog-footer .el-button {\r\n  border-radius: 10px;\r\n  margin-right:10px;\r\n}\r\n/* 确定按钮配色 */\r\n.custom-cancel-dialog .dialog-footer .el-button--confirm {\r\n  background-color: #FFE4B5;\r\n  border-color: #FFE4B5;\r\n  color: #8B4513;\r\n}\r\n\r\n/* 筛选区域 */\r\n.filter-form {\r\n  margin-bottom: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.filter-form .el-form-item {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.el-date-editor {\r\n  box-shadow: none !important;\r\n  border-color: #dcdfe6 !important;\r\n}\r\n.el-date-editor:focus,\r\n.el-date-editor.is-active,\r\n.el-date-editor input:focus {\r\n  outline: none;\r\n  border-color: #dcdfe6 !important;\r\n  box-shadow: none !important;\r\n}\r\n\r\n.filter-form .el-button {\r\n  height: 40px;\r\n  padding: 0 20px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n/* 卡片样式 */\r\n.appointment-card-container {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\r\n  gap: 20px;\r\n  padding: 10px 0;\r\n}\r\n\r\n.appointment-card {\r\n  background-color: white;\r\n  border: 1px solid #FFE4B5;\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  transition: transform 0.2s ease;\r\n}\r\n\r\n.appointment-card:hover {\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.appointment-card p {\r\n  margin: 6px 0;\r\n  font-size: 14px;\r\n}\r\n.el-dialog__header {\r\n  background-color: #f5e7da;\r\n}\r\n\r\n.el-dialog__title {\r\n  color: #8B4513;\r\n}\r\n\r\n.el-textarea__inner {\r\n  border-color: #FFE4B5;\r\n}\r\n\r\n.el-textarea__inner:focus {\r\n  border-color: #8B4513;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./book.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./book.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./book.vue?vue&type=template&id=6652a0ee&scoped=true\"\nimport script from \"./book.vue?vue&type=script&lang=js\"\nexport * from \"./book.vue?vue&type=script&lang=js\"\nimport style0 from \"./book.vue?vue&type=style&index=0&id=6652a0ee&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6652a0ee\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\nimport VueRouter from 'vue-router';\r\nimport Layout from '../views/Layout.vue';\r\nimport ConsultantDetail from '@/components/ConsultantDetail.vue';\r\nimport MySchedule from '../components/MySchedule.vue';\r\nimport Chat from '../components/Chat.vue';\r\nimport Chatnormal from '../components/Chatnormal.vue';\r\nimport settings from '../components/settings.vue';\r\nimport messages from '../components/messages.vue';\r\nimport book from '../components/book.vue';\r\n//import { set } from 'core-js/core/dict';\r\nVue.use(VueRouter);\r\n\r\nconst routes = [\r\n    {\r\n        path: '/',\r\n        redirect: '/login', // 默认重定向到登录页面\r\n    },\r\n    {\r\n        path: '/login',\r\n        name: 'Login',\r\n        component: () => import('../views/Login.vue'),\r\n    },\r\n    {\r\n        path: '/home', // 原来的根路径改为 /home\r\n        name: 'Layout',\r\n        component: Layout,\r\n        children: [\r\n            {\r\n                path: '', // 默认子路由\r\n                name: 'Home',\r\n                component: () => import('../views/main/Home.vue'),\r\n                // meta: {\r\n                //     isLogin: true\r\n                // }\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        path: '/userHome',\r\n        name: 'Personal',\r\n        component: () => import('../views/userHome.vue'), // 加载主组件\r\n        children: [\r\n            {\r\n                path: 'schedule', // 我的咨询\r\n                name: 'Schedule',\r\n                component: MySchedule,\r\n                // meta: {\r\n                //     isLogin: true\r\n                // }\r\n            },\r\n            {\r\n                path: 'book', // 我的咨询\r\n                name: 'book',\r\n                component: book,\r\n                // meta: {\r\n                //     isLogin: true\r\n                // }\r\n            },\r\n            {\r\n                path: 'messages', // 消息中心\r\n                name: 'messages',\r\n                component: messages,\r\n                // meta: {\r\n                //     isLogin: true\r\n                // }\r\n            },\r\n            {\r\n                path: 'settings', // 我的咨询\r\n                name: 'settings',\r\n                component: settings,\r\n                // meta: {\r\n                //     isLogin: true\r\n                // }\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        path: '/chat/:appointmentId',\r\n        name: 'Chat',\r\n        component:Chat,\r\n    },\r\n    {\r\n        path: '/chatnormal/:id',\r\n        name: 'Chatnormal',\r\n        component:Chatnormal,\r\n    },\r\n    {\r\n        path: '/consultant/:id',\r\n        name: 'consultantDetail',\r\n        component: ConsultantDetail,\r\n    },\r\n];\r\n\r\nconst router = new VueRouter({\r\n    mode: 'history', // 使用历史模式或哈希模式，根据你的需求选择\r\n    base: process.env.BASE_URL, // 基本 URL\r\n    routes,\r\n});\r\n\r\nexport default router;","// store/index.js\r\nimport Vue from 'vue';\r\nimport Vuex from 'vuex';\r\n\r\nVue.use(Vuex);\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    userId: null, // 用户 ID\r\n    username: null, // 用户名\r\n  },\r\n  \r\n  mutations: {\r\n    SET_USER_INFO(state, payload) {\r\n      state.userId = payload.userId;\r\n      state.username = payload.username;\r\n    },\r\n    CLEAR_USER_INFO(state) {\r\n      state.userId = null;\r\n      state.username = null;\r\n    },\r\n  },\r\n  actions: {\r\n    setUserInfo({ commit }, userInfo) {\r\n      commit('SET_USER_INFO', userInfo);\r\n    },\r\n    clearUserInfo({ commit }) {\r\n      commit('CLEAR_USER_INFO');\r\n    },\r\n  },\r\n  \r\n});","// router/index.js\r\nimport router from \"./index\";\r\nimport store from \"@/store\";\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  if (to.meta.isLogin) {\r\n    const userId = localStorage.getItem('userId');\r\n    const username = localStorage.getItem('username');\r\n    const token = localStorage.getItem('token');\r\n    if (userId && username) {\r\n      // 同步到 Vuex\r\n      store.dispatch('setUserInfo', { userId, username,token });\r\n      next();\r\n    } else {\r\n      next({\r\n        name: 'Login',\r\n      });\r\n    }\r\n  } else {\r\n    next();\r\n  }\r\n});","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport axios from 'axios'\r\nimport './plugins/element.js'\r\nimport router from './router/index.js'\r\nimport \"./assets/css/common.css\"\r\nimport \"./router/permession.js\"\r\nimport store from './store'\r\n\r\n// 使用 Vue CLI 代理，避免手动设置后端 URL\r\naxios.defaults.baseURL = '/api'\r\naxios.defaults.headers.post['Content-Type'] = 'application/json'\r\naxios.defaults.withCredentials = true; // 如果后端允许跨域携带 Cookie\r\n\r\nVue.prototype.$axios = axios;\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  router,\r\n  store,\r\n  render: h => h(App),\r\n}).$mount('#app')","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=687eba94&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=style&index=0&id=4c350582&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./CountdownTimer.vue?vue&type=style&index=0&id=7a138be1&prod&scoped=true&lang=css\"","export * from \"-!../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=e89777a0&prod&lang=css\"","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./messages.vue?vue&type=style&index=0&id=622042e6&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MySchedule.vue?vue&type=style&index=0&id=854e487a&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatContainer.vue?vue&type=style&index=0&id=bb49b3b8&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./book.vue?vue&type=style&index=0&id=6652a0ee&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./HistorySidebar.vue?vue&type=style&index=0&id=33668128&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNav.vue?vue&type=style&index=0&id=568b07ef&prod&scoped=true&lang=less\"","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageBubble.vue?vue&type=style&index=0&id=314c23fb&prod&scoped=true&lang=css\""],"sourceRoot":""}