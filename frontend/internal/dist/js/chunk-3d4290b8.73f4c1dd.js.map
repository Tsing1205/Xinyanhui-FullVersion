{"version":3,"sources":["webpack:///./src/views/SupervisorLogin.vue?1b2d","webpack:///src/views/SupervisorLogin.vue","webpack:///./src/views/SupervisorLogin.vue?8cf0","webpack:///./src/views/SupervisorLogin.vue","webpack:///./src/views/SupervisorLogin.vue?cf93"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","staticStyle","_v","on","$event","_k","keyCode","key","submitForm","attrs","loginForm","rules","model","value","callback","$$v","$set","expression","_m","staticRenderFns","dstway","Username","data","validateUserName","rule","reg","Error","length","test","validatePassword","currentIndex","activeTab","type","account","password","registerForm","username","phone","email","confirmPassword","validator","trigger","mounted","vantaEffect","BIRDS","el","$refs","vantaRef","THREE","VANTA","mouseControls","touchControls","gyroControls","minHeight","minWidth","scale","scaleMobile","backgroundColor","color1","color2","beforeDestroy","destroy","methods","switchToLogin","formName","_this","validate","valid","params","URLSearchParams","append","parseInt","$axios","post","toString","headers","then","response","code","supervisor","supervisorId","supervisorname","name","token","userType","localStorage","setItem","$store","dispatch","userId","$router","push","$message","error","msg","catch","handleTabsClick","tab","clearRegisterForm","component"],"mappings":"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","file":"js/chunk-3d4290b8.73f4c1dd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('div',{ref:\"vantaRef\",staticClass:\"left\",staticStyle:{\"height\":\"100vh\"}},[_c('h1',{staticStyle:{\"color\":\"#8B4513\",\"width\":\"20%\"}},[_vm._v(\"心研汇\")])]),_c('div',{staticClass:\"right\",on:{\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.submitForm('loginForm')}}},[_c('el-form',{ref:\"loginForm\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.rules,\"status-icon\":\"\",\"label-width\":\"90px\"}},[_c('el-form-item',{attrs:{\"label\":\"ID\",\"prop\":\"account\"}},[_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.loginForm.account),callback:function ($$v) {_vm.$set(_vm.loginForm, \"account\", $$v)},expression:\"loginForm.account\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"show-password\":\"\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1),_c('el-form-item',[_c('el-button',{staticClass:\"btn\",attrs:{\"type\":\"submit\"},on:{\"click\":function($event){_vm.submitForm('loginForm')}}},[_vm._v(\"登录\")])],1)],1),_vm._m(0)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pic\"},[_c('img',{staticStyle:{\"position\":\"fixed\",\"bottom\":\"0\",\"margin-right\":\"50px\",\"width\":\"150px\",\"height\":\"100px\"},attrs:{\"src\":require(\"../assets/icon.png\"),\"alt\":\"icon\"}})])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"login\">\r\n        <div class=\"left\" ref=\"vantaRef\" style=\"height: 100vh\">\r\n            <h1 style=\"color: #8B4513;width: 20%;\">心研汇</h1>\r\n        </div>\r\n        <div class=\"right\" @keydown.enter=\"submitForm('loginForm')\">\r\n                <!-- 登录表单 -->\r\n                <el-form :model=\"loginForm\" :rules=\"rules\" ref=\"loginForm\" status-icon label-width=\"90px\">\r\n                    <el-form-item label=\"ID\" prop=\"account\">\r\n                        <el-input type=\"text\" v-model=\"loginForm.account\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"密码\" prop=\"password\">\r\n                        <el-input type=\"password\" v-model=\"loginForm.password\" show-password/>\r\n                    </el-form-item>\r\n                    <el-form-item>\r\n                        <el-button class=\"btn\" @click=\"submitForm('loginForm')\" type=\"submit\">登录</el-button>\r\n                    </el-form-item>\r\n                </el-form>\r\n                <div class=\"pic\" >\r\n                    <img src=\"../assets/icon.png\" alt=\"icon\" style=\"position:fixed;bottom:0;margin-right:50px;width:150px; height: 100px;\"/> \r\n                </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n\r\n\r\n<script src=\"three.r134.min.js\"></script>\r\n<script src=\"vanta.birds.min.js\"></script>\r\n\r\n<script>\r\nconst dstway = \"/internal/login/supervisor\"; \r\nexport var Username = null;\r\nimport * as THREE from \"three\";\r\nimport BIRDS from \"vanta/src/vanta.birds\";\r\n\r\nexport default {\r\n    data() {\r\n        // id验证\r\n        var validateUserName = (rule, value, callback) => {\r\n        const reg = /^[Z0-9]+$/; // 只允许数字\r\n        if (value === '') {\r\n            callback(new Error('请输入ID'));\r\n        } else if (value.length <1) {\r\n            callback(new Error('ID不少于1位'));\r\n        } else if (!reg.test(value)) {\r\n            callback(new Error('ID只包含数字'));\r\n        } else {\r\n            callback();\r\n        }\r\n        };\r\n        // 密码验证规则\r\n        var validatePassword = (rule, value, callback) => {\r\n            const reg = /^[a-zA-Z0-9]+$/; // 只允许字母和数字\r\n            if (value.length === 0) {\r\n                callback(new Error('请输入密码'));\r\n            } else if (value.length < 6) {\r\n                callback(new Error('密码长度不少于6位'));\r\n            } else if (!reg.test(value)) {\r\n                callback(new Error('格式错误'));\r\n            }else {\r\n                callback();\r\n            }\r\n        };\r\n        return {\r\n            currentIndex: \"login\",\r\n            activeTab: \"\",\r\n            loginForm: {\r\n                type:0,\r\n                account: \"\",\r\n                password: \"\"\r\n            },\r\n            registerForm: {\r\n                username: \"\",\r\n                password: \"\",\r\n                phone: \"\" ,\r\n                email:\"\",\r\n                confirmPassword:\"\"\r\n            },\r\n            rules: {\r\n                username: [{\r\n                    validator: validateUserName,\r\n                    trigger: \"blur\"\r\n                }],\r\n                password: [{\r\n                    validator: validatePassword,\r\n                    trigger: \"blur\"\r\n                }],\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n        this.vantaEffect = BIRDS({\r\n        el: this.$refs.vantaRef,\r\n        THREE: THREE,\r\n        });\r\n        // 修改颜色时 cells 需要全大写字母 可生效\r\n        VANTA.BIRDS({\r\n        el: this.$refs.vantaRef,\r\n        mouseControls: true,\r\n        touchControls: true,\r\n        gyroControls: false,\r\n        minHeight: 200.00,\r\n        minWidth: 200.00,\r\n        scale: 1.00,\r\n        scaleMobile: 1.00,\r\n        backgroundColor: 0xf2f1e4,\r\n        color1: 0x53260c,\r\n        color2: 0xd1b621\r\n        })\r\n    },\r\n    beforeDestroy() {\r\n        if (this.vantaEffect) {\r\n        this.vantaEffect.destroy();\r\n        }\r\n    },\r\n    methods:{\r\n        switchToLogin() {\r\n            this.activeTab = 'login';\r\n        },\r\n        submitForm(formName){\r\n    this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n            // 构造 x-www-form-urlencoded 格式的参数\r\n            const params = new URLSearchParams();\r\n            params.append('id', parseInt(this.loginForm.account,10));\r\n            params.append('password', this.loginForm.password);\r\n\r\n            this.$axios.post(dstway, params.toString(), {\r\n                headers: {\r\n                    'Content-Type': 'application/x-www-form-urlencoded'\r\n                }\r\n            })\r\n            .then(response => {\r\n                if(response.data.code === \"1\"){\r\n                    const supervisor = response.data.data;\r\n                    const supervisorId = supervisor.supervisorId;\r\n                    const supervisorname = supervisor.name;\r\n                    const token = supervisor.token;\r\n                    const userType = 'supervisor';\r\n                    localStorage.setItem('userType', userType);\r\n                    localStorage.setItem('LoginState', 'true');\r\n                    this.$store.dispatch('setUserInfo', { userId: supervisorId, username: supervisorname, token, userType });\r\n                    localStorage.setItem('supervisorId', supervisorId);\r\n                    localStorage.setItem('supervisorname', supervisorname);\r\n                    localStorage.setItem('token', token);\r\n                    this.$router.push('/SupervisorHome');\r\n                } else {\r\n                    this.$message.error(response.data.msg);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                this.$message.error('登录失败!');\r\n            });\r\n        } else {\r\n            this.$message.error('输入数据不合法!');\r\n        }\r\n    });\r\n},\r\n\r\n        handleTabsClick(tab){\r\n            this.activeTab=tab.name;\r\n        },\r\n        clearRegisterForm() {\r\n            // 清空注册表单数据\r\n            this.registerForm = {\r\n            username: \"\",\r\n            password: \"\",\r\n            phone: \"\",\r\n            email: \"\",\r\n            confirmPassword: \"\"\r\n            };\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped lang=\"less\">\r\n\r\n.login{\r\n    margin: 0 auto;\r\n    .left {\r\n        top: 0;\r\n        left: 0;\r\n        width: 50%;\r\n        height: 100vh;\r\n        z-index: -1;\r\n    }\r\n    .right{\r\n        width: 50%;\r\n        background-color: #fff;\r\n        height: 100vh;\r\n    }\r\n    .left {\r\n        float: left;\r\n    }\r\n    .right{\r\n        float:right;\r\n        display:flex;\r\n        align-items:center;\r\n        justify-content: center;\r\n        text-align: center;\r\n    }\r\n    .box-card{\r\n        width: 80%;\r\n        margin: 100px auto;\r\n    }\r\n    .choice{\r\n        margin-left: 160px;\r\n        margin-top:40px;\r\n        display: table;\r\n        .btn1{\r\n            width: 200px;\r\n            height:40px;\r\n            background-color:#293ce7;\r\n            color: white;\r\n            border:none;\r\n            border-radius: 25px;\r\n            margin-right: 30px;\r\n            display: table-cell;\r\n        }\r\n        .btn2{\r\n            width: 200px;\r\n            height:40px;\r\n            background-color:#293ce7;\r\n            color: white;\r\n            border:none;\r\n            border-radius: 25px;\r\n            margin-right: 20px;\r\n            display: table-cell;\r\n        }\r\n        .btn1:hover{\r\n            background-color: #5263f4;\r\n        }\r\n        .btn2:hover{\r\n            background-color: #5263f4;\r\n        }\r\n    }\r\n}\r\n\r\n.btn{\r\n    padding: 0 30px;\r\n    height:40px;\r\n    background-color:#293ce7;\r\n    color: white;\r\n    border:none;\r\n    border-radius: 20px;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n}\r\n\r\n.btn:hover{\r\n    background-color: #5263f4;\r\n}\r\n.remind{\r\n    justify-content: center;\r\n    display:flex;\r\n    color:#999;\r\n    margin-left: 90px;\r\n    font-size: 14px;\r\n    margin-top:10px;\r\n}\r\n.remind:hover{\r\n    color: #333;\r\n    cursor: pointer;\r\n}\r\n.remind2{\r\n    justify-content: center;\r\n    display:flex;\r\n    color:#999;\r\n}\r\n.remind2:hover{\r\n    color: #333;\r\n    cursor: pointer;\r\n}\r\n\r\n</style>","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SupervisorLogin.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SupervisorLogin.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SupervisorLogin.vue?vue&type=template&id=c8fdf4f8&scoped=true\"\nimport script from \"./SupervisorLogin.vue?vue&type=script&lang=js\"\nexport * from \"./SupervisorLogin.vue?vue&type=script&lang=js\"\nimport style0 from \"./SupervisorLogin.vue?vue&type=style&index=0&id=c8fdf4f8&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c8fdf4f8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./SupervisorLogin.vue?vue&type=style&index=0&id=c8fdf4f8&prod&scoped=true&lang=less\""],"sourceRoot":""}