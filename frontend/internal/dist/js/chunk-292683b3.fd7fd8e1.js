(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-292683b3"],{"32a4":function(t,e,o){"use strict";o("3ed1")},"3ed1":function(t,e,o){},be00:function(t,e,o){"use strict";o.r(e),o.d(e,"Username",(function(){return c}));var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[o("div",{ref:"vantaRef",staticClass:"left",staticStyle:{height:"100vh"}},[o("h1",{staticStyle:{color:"#8B4513",width:"20%"}},[t._v("心研汇")])]),o("div",{staticClass:"right",on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.submitForm("loginForm")}}},[o("el-form",{ref:"loginForm",attrs:{model:t.loginForm,rules:t.rules,"status-icon":"","label-width":"90px"}},[o("el-form-item",{attrs:{label:"ID",prop:"account"}},[o("el-input",{attrs:{type:"text"},model:{value:t.loginForm.account,callback:function(e){t.$set(t.loginForm,"account",e)},expression:"loginForm.account"}})],1),o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{attrs:{type:"password","show-password":""},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),o("el-form-item",[o("el-button",{staticClass:"btn",attrs:{type:"submit"},on:{click:function(e){t.submitForm("loginForm")}}},[t._v("登录")])],1)],1),t._m(0)],1)])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pic"},[n("img",{staticStyle:{position:"fixed",bottom:"0","margin-right":"50px",width:"150px",height:"100px"},attrs:{src:o("555a"),alt:"icon"}})])}],a=(o("7f7f"),o("6b54"),o("5a89")),s=o("373f"),i="/internal/login/consultant",c=null,l={data:function(){var t=function(t,e,o){var n=/^[Z0-9]+$/;""===e?o(new Error("请输入ID")):e.length<1?o(new Error("ID不少于1位")):n.test(e)?o():o(new Error("ID只包含数字"))},e=function(t,e,o){var n=/^[a-zA-Z0-9]+$/;0===e.length?o(new Error("请输入密码")):e.length<6?o(new Error("密码长度不少于6位")):n.test(e)?o():o(new Error("格式错误"))};return{currentIndex:"login",activeTab:"",loginForm:{type:0,account:"",password:""},registerForm:{username:"",password:"",phone:"",email:"",confirmPassword:""},rules:{username:[{validator:t,trigger:"blur"}],password:[{validator:e,trigger:"blur"}]}}},mounted:function(){this.vantaEffect=Object(s["a"])({el:this.$refs.vantaRef,THREE:a}),VANTA.BIRDS({el:this.$refs.vantaRef,mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1,backgroundColor:15921636,color1:5449228,color2:13743649})},beforeDestroy:function(){this.vantaEffect&&this.vantaEffect.destroy()},created:function(){document.title="咨询师登录"},methods:{switchToLogin:function(){this.activeTab="login"},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(t){var o=new URLSearchParams;o.append("id",parseInt(e.loginForm.account,10)),o.append("password",e.loginForm.password),e.$axios.post(i,o.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){if("1"===t.data.code){var o=t.data.data,n=o.consultantId,r=o.name,a=o.token,s="consultant";localStorage.setItem("LoginState","true"),e.$store.dispatch("setUserInfo",{userId:n,username:r,token:a,userType:s}),localStorage.setItem("consultantId",n),localStorage.setItem("consultantname",r),localStorage.setItem("token",a),localStorage.setItem("userType",s),e.$router.push("/consultantHome"),e.$store.dispatch("disconnectWebSocket"),e.$store.dispatch("connectWebSocket",a)}else e.$message.error(t.data.msg)})).catch((function(t){e.$message.error("登录失败!")}))}else e.$message.error("输入数据不合法!")}))},handleTabsClick:function(t){this.activeTab=t.name},clearRegisterForm:function(){this.registerForm={username:"",password:"",phone:"",email:"",confirmPassword:""}}}},u=l,m=(o("32a4"),o("0c7c")),d=Object(m["a"])(u,n,r,!1,null,"54d1d7fe",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-292683b3.fd7fd8e1.js.map